var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,e,g){d!=Array.prototype&&d!=Object.prototype&&(d[e]=g.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,e,g,c){if(e){g=$jscomp.global;d=d.split(".");for(c=0;c<d.length-1;c++){var a=d[c];a in g||(g[a]={});g=g[a]}d=d[d.length-1];c=g[d];e=e(c);e!=c&&null!=e&&$jscomp.defineProperty(g,d,{configurable:!0,writable:!0,value:e})}};$jscomp.underscoreProtoCanBeSet=function(){var d={a:!0},e={};try{return e.__proto__=d,e.a}catch(g){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(d,e){d.__proto__=e;if(d.__proto__!==e)throw new TypeError(d+" is not extensible");return d}:null;$jscomp.polyfill("Object.setPrototypeOf",function(d){return d||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.polyfill("Array.prototype.fill",function(d){return d?d:function(d,g,c){var a=this.length||0;0>g&&(g=Math.max(0,a+g));if(null==c||c>a)c=a;c=Number(c);0>c&&(c=Math.max(0,a+c));for(g=Number(g||0);g<c;g++)this[g]=d;return this}},"es6","es3");
var __extends=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var c in g)g.hasOwnProperty(c)&&(d[c]=g[c])};return function(e,g){function c(){this.constructor=e}d(e,g);e.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}(),KIP;
(function(d){var e=function(){function g(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];this._class_names=c}Object.defineProperty(g.prototype,"className",{get:function(){return this._class_names.slice().reverse().join("::")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"paddedClassName",{get:function(){return this._class_names.join(" <-- ")},enumerable:!0,configurable:!0});g.prototype._addClassName=function(c){if(d.contains(this._class_names,c))return!1;this._class_names.push(c);
return!0};return g}();d.NamedClass=e})(KIP||(KIP={}));(function(d){})(KIP||(KIP={}));(function(d){d.equals=function(d,g){return d.equals?d.equals(g):d===g};d.lesserThan=function(d,g){return d.lesserThan?d.lesserThan(g):d<g};d.greaterThan=function(d,g){return d.greaterThan?d.greaterThan(g):d>g}})(KIP||(KIP={}));
(function(d){function e(a){var b,f;var c=document.createElement(a.type||"div");a.id&&c.setAttribute("id",a.id);if(a.cls)if("string"===typeof a.cls)c.setAttribute("class",a.cls);else if("object"===typeof a.cls)for(h in a.cls)a.cls.hasOwnProperty(h)&&(d.createClass(h,a.cls[h]),d.addClass(c,h));a.before_content&&(c.innerHTML=a.before_content);a.content&&(c.innerHTML+=a.content);if(a.children)for(f in a.children)if(a.children.hasOwnProperty(f)){if(!a.children[f])throw Error("cannot append non-existent child element");
if(a.children[f].setAttribute)c.appendChild(a.children[f]);else{var h=e(a.children[f]);c.appendChild(h)}}if(a.attr)for(b in a.attr)a.attr.hasOwnProperty(b)&&a.attr[b]&&(a.attr[b].key?"value"===a.attr[b].key?c.value=a.attr[b].val:c.setAttribute(a.attr[b].key,a.attr[b].val):"value"===b?c.value=a.attr[b]:c.setAttribute(b,a.attr[b]));a.after_content&&(c.innerHTML+=a.after_content);a.parent&&a.parent.appendChild(c);return c}function g(a,f){return b(a,"offsetLeft",f)}function c(a,f){return b(a,"offsetTop",
f)}function a(a,b){return{left:g(a,b),top:c(a,b)}}function b(a,b,f){for(var c=0;a&&a!==f;)a[b]&&(c+=a[b]),a=a.offsetParent;return c}function f(a,b){for(;b;){if(b===a)return!0;b=b.parentNode}return!1}function h(a,b,f){var c;var d={};var k=function(a,b){for(var d in a)a.hasOwnProperty(d)&&(f&&"object"===typeof a[d]?(c={},c.prototype=Object.create(a[d].prototype),c=h(c,a[d]),b[d]=c):b[d]=a[d])};k(a,d);k(b,d);return d}d.StylesAdded={Editable:!1,ContextMenu:!1,Draggable:!1,Hidden:!1,Unselectable:!1,FullScreenTutorial:!1,
HelpTipTutorial:!1};d.createSimpleElement=function(a,b,f,c,d,h){var k={};k.id=a;k.type="div";k.content=f;k.cls=b;k.attr=c;k.children=d;k.parent=h;return e(k)};d.createElement=e;d.createSimpleLabeledElement=function(a,b,f,c,h,g,r,t){if(!(void 0===c||null===c||"string"===typeof c&&0===d.trim(c).length||t&&0===c))return t={},t.id=a,t.type="div",t.cls=b,t.attr=h,t.children=g,t.parent=r,a={cls:"lbl",content:f,type:"span"},t.children=[a,{cls:"content",content:c,type:"span"}],e(t)};d.createLabeledElement=
function(a,b){if(a&&b){a=e(a);b.cls=d.Styles.buildClassString(b.cls,"lbl");b=e(b);var f=e({cls:"wrapper",children:[b,a]});return{data:a,lbl:b,wrapper:f}}};d.map=function(a,b){if(a)if(a.map)a.map(b);else{var f=0,c=void 0;for(c in a)a.hasOwnProperty(c)&&(b(a[c],c,f),f+=1)}};d.globalOffsetLeft=g;d.globalOffsetTop=c;d.globalOffsets=a;d.findCommonParent=function(a,b){var f;if(a&&b)for(f=b;a;){for(;f;){if(a===f)return a;f=f.parentNode}a=a.parentNode;f=b}};d.moveRelToElem=function(b,f,c,d,h){f=a(b);var k=
a(b);c=k.left+c-f.left;d=k.top+d-f.top;h||(b.style.position="absolute",b.style.left=c+"px",b.style.top=d+"px");return{x:c,y:d}};d.removeSubclassFromAllElements=function(a,b,f){var c;a=document.getElementsByClassName(a);for(c=0;c<a.length;c+=1){var h=a[c];h!==f&&d.removeClass(h,b)}};d.removeElemFromArr=function(a,b,f){var c,d;f||(f=function(a,b){return a===b});for(c=a.length-1;0<=c;--c)f(a[c],b)&&(d=a.splice(c,1));return d};d.roundToPlace=function(a,b){return Math.round(a*b)/b};d.addLeadingZeroes=
function(a,b){b="string"===typeof b?b:b.toString();var f;for(f=b.length;f<a;f+=1)b="0"+b;return b};d.isChildEventTarget=function(a,b){return f(b,a.target)};d.isChild=f;d.appendChildren=function(a){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];for(f=1;f<b.length;f+=1)a.appendChild(b[f])};d.combineObjects=h;d.reconcileOptions=function(a,b){var f;a||(a={});for(f in b)if(b.hasOwnProperty(f)){var c=a[f];if(void 0===c||null===c)a[f]=b[f]}return a};d.getScrollPosition=function(){return{x:window.pageXOffset?
window.pageXOffset:document.body.scrollLeft,y:window.pageYOffset?window.pageYOffset:document.body.scrollTop}};d.moveElemRelativePosition=function(a,b){var f=parseInt(a.style.top),c=parseInt(a.style.left);a.style.top=f+b.y+"px";a.style.left=c+b.x+"px"};d.isNullOrUndefined=function(a){return void 0===a||null===a?!0:!1}})(KIP||(KIP={}));
(function(d){function e(c,a,b){c.onreadystatechange=function(){4===c.readyState&&(200===c.status?a&&a(c.responseText):b&&b(c.responseText))};return c}var g;(function(c){c[c.POST=1]="POST";c[c.GET=2]="GET"})(g=d.AjaxTypeEnum||(d.AjaxTypeEnum={}));d.ajaxRequest=function(c,a,b,f,d){var h=null;try{h=new XMLHttpRequest}catch(l){try{h=new ActiveXObject("Msxml2.XMLHTTP")}catch(q){try{h=new ActiveXObject("Microsoft.XMLHTTP")}catch(p){h=null}}}if(!h)return null;e(h,b,f);b=h;if(c===g.GET)b.open("GET",a,!0);
else if(c===g.POST){c="application/x-www-form-urlencoded";b.open("POST",a,!0);if(d instanceof FormData)c="";else{a="";for(var m in d)d.hasOwnProperty(m)&&(0<a.length&&(a+="&"),a+=encodeURIComponent(m)+"="+encodeURIComponent(d[m]));d=a}c&&b.setRequestHeader("Content-Type",c);b.send(d)}return h};d.loadFile=function(c,a,b){var f=new XMLHttpRequest;f.open("GET",c);f.onreadystatechange=function(){4==f.readyState&&200==f.status?a(f.responseText):404===f.status&&b(f.responseText)};f.send()}})(KIP||(KIP=
{}));
(function(d){function e(a,b){var f,c=!0,d;for(f in b)if(b.hasOwnProperty(f)&&(d=b[f])&&void 0===a[f]){c=!1;break}if(!c)return!1;c=!1;for(f in a)if(a.hasOwnProperty(f)&&void 0===b[f]){c=!0;break}return!c}function g(a){return c(a,"Drawable")}function c(a,b){return b?(a=a.paddedClassName)?-1!==a.indexOf(b):!1:!1}d.isHTMLElement=function(a){return!a||g(a)?!1:!!a.appendChild};d.isString=function(a){return"string"===typeof a};d.isNumber=function(a){return"number"===typeof a};d.isBoolean=function(a){return"boolean"===typeof a};
d.isClientRect=function(a){return e(a,{top:1,bottom:1,left:1,right:1,height:1,width:1})?!0:!1};d.isSVGRect=function(a){return e(a,{x:1,y:1,width:1,height:1})?!0:!1};d.isIBasicRect=function(a){return e(a,{x:1,y:1,w:1,h:1})?!0:!1};d.isIPoint=function(a){return e(a,{x:1,y:1,z:0})};d.isIElemDefinition=function(a){return e(a,{after_content:"",attr:null,before_content:"",children:null,cls:"",content:"",id:"",parent:null,type:""})?!0:!1};d.isIExtrema=function(a){return e(a,{min:{x:0,y:0},max:{x:0,y:0}})};
d.isInterface=e;d.isEditable=function(a){return c(a,"Editable")};d.isDrawable=g;d.isDrawableElement=function(a){return!!a.appendChild};d.isNamedClass=c})(KIP||(KIP={}));(function(d){function e(d,c,a){for(var b=0;b<d.length;b+=1)if(a){if(a(d[b],c))return b}else if(d[b]===c)return b;return-1}d.contains=function(d,c){return-1!==e(d,c)};d.indexOf=e;d.remove=function(d,c,a,b){for(b=e(d,c,b);-1!==b;)d.splice(b,1),b=a?e(d,c):-1;return d}})(KIP||(KIP={}));
(function(d){function e(d,c,a){var b;var f=document.getElementsByTagName("style");0<f.length?f=f[0]:(f=document.createElement("style"),f.innerHTML="");f.innerHTML+="\n"+d+" {\n";for(b in c)c.hasOwnProperty(b)&&(f.innerHTML=c[b].key?f.innerHTML+("\t"+c[b].key+": "+c[b].val+";\n"):f.innerHTML+("\t"+b+" : "+c[b]+";\n"));f.innerHTML+="\n}";a||document.head.appendChild(f);return f}d.THEME_BG_COLOR_CLS="themeBGColor";d.THEME_COLOR_CLS="themeColor";d.THEME_COLOR_HOVER_CLS="themeBGHoverColor";d.addClass=
function(g,c){if(g&&c){var a=d.isDrawable(g)?g.base:g;(g=a.getAttribute("class"))?(g=" "+g+" ",-1===g.indexOf(" "+c+" ")&&a.setAttribute("class",d.trim(g+c))):a.setAttribute("class",c)}};d.removeClass=function(g,c){if(g&&c){var a=d.isDrawable(g)?g.base:g;g=" "+a.getAttribute("class")+" ";var b=g.length;g=g.replace(" "+c+" "," ");g.length!==b&&a.setAttribute("class",d.trim(g))}};d.hasClass=function(g,c){if(g)return g=d.isDrawable(g)?g.base:g,-1===(" "+g.getAttribute("class")+" ").indexOf(" "+c+" ")?
!1:!0};d.setProperty=function(d,c,a,b){var f,h;for(f=0;f<document.styleSheets.length;f+=1){var g=document.all?"rules":"cssRules";if(h=document.styleSheets[f][g])for(g=0;g<h.length;g+=1){var e=h[g];if(e.selectorText===d&&(e.style[c]||b))return e.style[c]=a,!0}}return!1};d.getProperty=function(d,c){var a,b;for(a=0;a<document.styleSheets.length;a+=1){var f=document.all?"rules":"cssRules";if(b=document.styleSheets[a][f])for(f=0;f<b.length;f+=1){var h=b[f];if(h.selectorText===d)return h.style[c]}}return""};
d.createClass=e;d.getComputedStyle=function(d,c){d=void 0!==d.draw?d.base:d;return window.getComputedStyle?(d=window.getComputedStyle(d),c?d.getPropertyValue(c):d):d.currentStyle?(d=d.currentStyle,c?d[c]:d):null};d.addHiddenClass=function(){e(".hidden",{display:"none"})};d.addUnselectableClass=function(){e(".unselectable",{"user-select":"none","-moz-user-select":"none","-webkit-user-select":"none","khtml-user-select":"none","o-user-select":"none"})}})(KIP||(KIP={}));
(function(d){function e(a,b){return a.substr(b,1)}function g(a,b){return a.substring(b,a.length)}function c(a){return/[0-9]/.test(a)}d.piece=function(a,b,f){void 0===f&&(f=1);return a.split(b)[f]||""};d.titleCase=function(a,b){void 0===b&&(b=" ");var f;var c="";a=a.split(b);for(f=0;f<a.length;f+=1)0!==f&&(c+=b),c+=e(a[f],0).toUpperCase(),c+=g(a[f],1).toLowerCase();return c};d.sentenceCase=function(a){var b=e(a,0).toUpperCase();return b+=g(a,1).toLowerCase()};d.charAt=e;d.rest=g;d.trim=function(a){a=
a.replace(/^\s*/g,"");return a=a.replace(/\s*?$/g,"")};d.format=function(a){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];f=a.split("");b||(b=[]);for(var h="",g=!1,e=0;e<f.length;e+=1){var l=f[e];if("\\"===l)break;else"{"===l?(g=!0,f[e]=""):"}"===l&&g?(f[e]=d.isNullOrUndefined(b[+h])?"{"+h+"}":b[+h],g=!1,h=""):c(l)&&g?(h+=l,f[e]=""):g&&(g=!1,h="")}return f.join("")};d.isNumeric=c})(KIP||(KIP={}));
(function(d){(function(e){function g(b,f,c,d,h){d||(b=a(b,!0),f=a(f,!0));b=b>f||c?b-f:f-b;h||(b/=864E5);return b}function c(b){var f=new Date;return b?f:f=a(f)}function a(a,f){a=b(a);return f?new Date(a+" 00:00Z"):new Date(a)}function b(a){var b=h(a);return a.getMonth()+1+"/"+a.getDate()+"/"+b}function f(a,b){var f=+a.getMinutes();a=+a.getHours();var c="";f=10>f?"0"+f:f.toString();b&&(c=" AM",12<=a&&(c=" PM"),12<a&&(a-=12));return a+":"+f+c}function h(a){return+a.getFullYear()%100}function k(a,f){return b(a)===
b(f)?!0:!1}e.dateDiff=g;e.getToday=c;e.clearTimeInfo=a;e.businessDateDiff=function(a,b,f,c,d){f=g(a,b,f,c,d);a=(b>a?a.getDay():b.getDay())+1;a%=7;0>a&&(a=6);for(b=c=0;b<Math.abs(f);b+=1){if(0===a||6===a)c+=1;a+=1;a%=7;0>a&&(a=6)}return f-c*(0>f?-1:1)};e.shortDate=b;e.inputDateFmt=function(a){a.getFullYear();var b=a.getMonth()+1;10>b&&(b="0"+b);var f=+a.getDate();10>f&&(f="0"+f);return a.getFullYear()+"-"+b+"-"+f};e.inputToDate=function(a,b){a?(a=a.split("-"),a=new Date(+a[0],+a[1]-1,+a[2])):a=c();
b&&(b=b.split(":"),a.setHours(+b[0]),a.setMinutes(+b[1]));return a};e.shortTime=f;e.shortDateTime=function(a,c){return b(a)+" "+f(a,c)};e.stopwatchDisplay=function(a,b,f){var c=Math.floor(a/1E3);a%=1E3;var h=Math.floor(c/60);c%=60;var g=Math.floor(h/60);h%=60;f=Math.floor(g/24);g%=24;b?(b=c.toString(),h=h.toString(),g=g.toString()):(b=d.addLeadingZeroes(2,c),h=d.addLeadingZeroes(2,h),g=d.addLeadingZeroes(2,g));return f+"D  "+g+":"+h+":"+b+" '"+a};e.addToDate=function(a,b){b.milliseconds&&a.setMilliseconds(a.getMilliseconds()+
b.milliseconds);b.seconds&&a.setSeconds(a.getSeconds()+b.seconds);b.minutes&&a.setMinutes(a.getMinutes()+b.minutes);b.hours&&a.setHours(a.getHours()+b.hours);b.days&&a.setDate(a.getDate()+b.days);return a};e.getMonthName=function(a,b){switch(a.getMonth()){case 0:return b?"Jan":"January";case 1:return b?"Feb":"February";case 2:return b?"Mar":"March";case 3:return b?"Apr":"April";case 4:return"May";case 5:return b?"Jun":"June";case 6:return b?"Jul":"July";case 7:return b?"Aug":"August";case 8:return b?
"Sept":"September";case 9:return b?"Oct":"October";case 10:return b?"Nov":"November";case 11:return b?"Dec":"December"}return""};e.getDayOfWeek=function(a,b){switch(a.getDay()){case 0:return b?"Sun":"Sunday";case 1:return b?"Mon":"Monday";case 2:return b?"Tues":"Tuesday";case 3:return b?"Wed":"Wednesday";case 4:return b?"Thurs":"Thursday";case 5:return b?"Fri":"Friday";case 6:return b?"Sat":"Saturday"}return""};e.getShortYear=h;e.isWeekend=function(a){a=a.getDay();return 0===a||6===a?!0:!1};e.isToday=
function(b){var f=c();b=a(b);return k(f,b)};e.isSameDate=k})(d.Dates||(d.Dates={}))})(KIP||(KIP={}));
(function(d){function e(g,c){var a;if(!g)return c;if("string"==typeof g)c.innerHTML=g;else if(g.appendChild)c.appendChild(g);else{if(g.create){var b=d.createElement(g.create);c.appendChild(b)}else c.innerHTML=g.content;for(a in g.attr)g.attr.hasOwnProperty(a)&&c.setAttribute(a,g.attr[a])}return c}d.createTable=function(g,c,a,b,f){var h,k;b||(b=a&&a.length||0);g=d.createElement({type:"table",cls:c});for(h=0;h<b;h+=1)for(f||(f=a[h].length),c=g.insertRow(-1),k=0;k<f;k+=1){var m=a[h][k];var l=c.insertCell(-1);
e(m,l)}return g};d.processCellContents=e;d.addRow=function(d,c,a,b){var f;a||0===a||(a=-1);b||0===b||(b=c.length);if(d&&d.insertRow){d=d.insertRow(a);for(f=0;f<b;f+=1){a=d.insertCell(-1);var h=c[f]||"";e(h,a)}return d}}})(KIP||(KIP={}));
(function(d){(function(e){function g(a){return Math.PI*a/180}function c(a,b,f){b=g(b);return{x:Math.cos(b)*f+a.x,y:Math.sin(b)*f+a.y}}function a(a,b,f,c,h){var g=m(a,b);b=k(a,b);d.createClass(".angledLine",{position:"absolute",height:"1px","transform-origin":"0px 0px"});var e=d.createSimpleElement("","angledLine");e.style.left=a.x+"px";e.style.top=a.y+"px";e.style.width=g+"px";e.style.transform="rotate("+b+"deg)";f.appendChild(e);c&&(a=d.createSimpleElement("","lbl",c),h&&(a.style.transform="rotate("+
-1*b+"deg)",a.style.transformOrigin="(0, 0)"),e.appendChild(a));return e}function b(a){return{x:a.x,y:a.y,w:a.width,h:a.height}}function f(a){return{x:a.left,y:a.top,w:a.width,h:a.height}}function h(a){var c;d.isIBasicRect(a)?c=a:d.isClientRect(a)?c=f(a):d.isSVGRect(a)&&(c=b(a));return c}function k(a,b){var f=b.x-a.x;a=b.y-a.y;if(0===f)return 0>a?270:90;if(0===a)return 0>f?180:0;b=0>f?Math.PI:0;var c=Math.atan(Math.abs(a)/Math.abs(f));return 180/Math.PI*(c*(0<f*a?1:-1)+b)}function m(a,b){var f=a.x-
b.x;a=a.y-b.y;return Math.sqrt(f*f+a*a)}function l(a,b){b=h(b);return a.x<b.x||a.x>b.x+b.w||a.y<b.y||a.y>b.y+b.h?!1:!0}function q(a,b){a=h(a);b=h(b);return a.x<b.x||a.x+a.w>b.w+b.x||a.y<b.y||a.y+a.h>b.h+b.y?!1:!0}function p(a,b){h(a);h(b);return!1}e.debugPoint=function(a){a.z?console.log("3D POINT: ("+a.x+", "+a.y+", "+a.z+")"):console.log("2D POINT: ("+a.x+", "+a.y+")")};e.degreesToRadians=g;e.getEndPoint=c;e.getCentralPoint=function(a){return{x:a.offsetLeft+a.offsetWidth/2,y:a.offsetTop+a.offsetWidth/
2}};e.arrangeRadially=function(a,b,f,d){f=f||0;var h=(d||360)-f;d=h/b.length;var e=0;a={x:a.offsetWidth/2,y:a.offsetHeight/2};for(var k,r=0;r<b.length;r++){k=b[r];var m=h/b.length;k=Math.max(k.offsetWidth,k.offsetHeight)*Math.sin(g(180-m))/Math.sin(g(m));k>e&&(e=k)}console.log("DISTANCE: "+e);console.log("CENTRAL POINT: ("+a.x+", "+a.y+")");for(h=0;h<b.length;h+=1)r=c(a,f+d*h,e),console.log(r),k=b[h],k.style.left=r.x-k.offsetWidth/2+"px",k.style.top=r.y-k.offsetHeight/2+"px"};e.drawLine=a;e.connectElements=
function(b,f,c,h){var g=d.findCommonParent(b,f);var e=d.globalOffsetLeft(b,g)+b.offsetWidth/2;var k=d.globalOffsetLeft(f,g)+f.offsetWidth/2;b=d.globalOffsetTop(b,g)+b.offsetHeight/2;f=d.globalOffsetTop(f,g)+f.offsetHeight/2;return a({x:e,y:b},{x:k,y:f},g,c,h)};e.clientRectToShape=function(a){var b=[];b[0]={x:a.left,y:a.top};b[1]={x:a.left+a.width,y:a.top};b[2]={x:a.left+a.width,y:a.top+a.height};b[3]={x:a.left,y:a.top+a.height};return b};e.svgRectToShape=function(a){var b=[];b[0]={x:a.x,y:a.y};b[1]=
{x:a.x+a.width,y:a.y};b[2]={x:a.x+a.width,y:a.y+a.height};b[3]={x:a.x,y:a.y+a.height};return b};e.svgRectToBasicRect=b;e.clientRectToBasicRect=f;e.toBasicRect=h;e.getAngle=k;e.getDistance=m;e.calculatePolygonInternalAngle=function(a){return d.roundToPlace(g(360/a),1E3)};e.isWithin=function(a,b,f,c){return c?a<f&&a>b:a<=f&&a>=b};e.isPointContained=l;e.isRectContained=q;e.isElementContained=function(a,b){b=a.getBoundingClientRect();a=a.getBoundingClientRect();return q(b,a)};e.isShapeContained=function(a,
b){for(var f,c=0;c<a.length;c++)if(f=a[c],!l(f,b))return!1;return!0};e.doElementsOverlap=function(a,b){a=a.getBoundingClientRect();b=b.getBoundingClientRect();return p(a,b)};e.doRectsOverlap=p;e.doBasicRectsOverlap=function(a,b){var f,c;a.x>=b.x&&a.x<=b.w+b.x&&(f=!0);b.x>=a.x&&b.x<=a.w+a.x&&(f=!0);a.y>=b.y&&a.y<=b.h+b.y&&(c=!0);b.y>=a.y&&b.y<=a.h+a.y&&(c=!0);return f&&c};e.findBasicRectIntersection=function(a,b){var f=Math.max(a.x,b.x),c=Math.max(a.y,b.y);return{x:f,y:c,w:Math.min(a.x+a.w,b.x+b.w)-
f,h:Math.min(a.y+a.h,b.y+b.h)-c}}})(d.Trig||(d.Trig={}))})(KIP||(KIP={}));(function(d){function e(d){return{x:d.x,y:d.y}}d.cloneRect=function(d){return{x:d.x,y:d.y,w:d.w,h:d.h}};d.clonePoint=e;d.clonePointArray=function(d){for(var c=[],a,b=0;b<d.length;b++)a=d[b],a=e(a),c.push(a);return c};d.cloneObject=function(d){return JSON.parse(JSON.stringify(d))}})(KIP||(KIP={}));
(function(d){(function(e){function g(a,f){var b=a.offsetTop;b+=Math.min(window.innerHeight,a.offsetHeight);if(!f)return b;0>a.offsetTop?b-=window.innerHeight/2:a.offsetTop>window.innerHeight/2&&(b+=window.innerHeight/2);return b}function c(b,f,d,g,e,l){var h=a(b);d+=1;(g?0<=h:0>=h)||100===d||(.5<h/f?h=d:(l||(l=d),h=2*l-d),window.scrollBy(0,e*h*h),window.setTimeout(function(){c(b,f,d,g,e,l)},20))}function a(a){var b=d.getScrollPosition();return a-(b.y+window.innerHeight)}e.scrollTo=function(b,f){var d=
g(b,f),e=a(d),m=0>e,l=e/1E4;window.setTimeout(function(){c(d,e,0,m,l)},20)}})(d.Helpers||(d.Helpers={}))})(KIP||(KIP={}));
(function(d){(function(e){function g(a){if(a&&(a=document.getElementsByTagName("style"),0<a.length))return a=a[0];a=document.createElement("style");a.innerHTML="";return a}function c(a){for(var b,c,d=0;d<document.styleSheets.length;d+=1)if(b=document.all?"rules":"cssRules",b=document.styleSheets[d][b])for(var g=0;g<b.length;g+=1)if(c=b[g],c.selectorText===a)return c}var a=function(a){function b(){var b=a.call(this,"Stylable")||this;b._colors=[];b._createStyles();b._hasCreatedStyles=!0;return b}__extends(b,
a);Object.defineProperty(b.prototype,"_uncoloredStyles",{get:function(){return this.constructor._uncoloredStyles},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"uncoloredStyles",{get:function(){return this._getUncoloredStyles()},enumerable:!0,configurable:!0});b.prototype._getUncoloredStyles=function(){return this.constructor._uncoloredStyles};b.prototype.setThemeColor=function(a,f,c){f&&(a=this._buildThemeColorId(a),c&&b._themeColors[a]||(b._themeColors[a]=f,b._updateAllThemeColors(),
b._createStyles(!0)))};b._buildThemeColorId=function(a,b){return d.format("<{0}|{1}>",b,a.toString())};b.prototype._buildThemeColorId=function(a,f){return b._buildThemeColorId(a,f||this.constructor.name)};b._mergeThemes=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var f={};a.map(function(a){d.map(a,function(a,b){f[b]||(f[b]={});d.map(a,function(a,c){f[b][c]=a})})});return f};b.prototype._mergeThemes=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];return b._mergeThemes.apply(b,
a)};b._mergeIntoStyles=function(a){this._uncoloredPageStyles=this._mergeThemes(this._uncoloredPageStyles,a);this._updateAllThemeColors()};b._updateAllThemeColors=function(){var a=d.cloneObject(this._uncoloredPageStyles),f=b._handleUpdatingThemeColor(a);this._pageStyles=a;f&&this._createStyles()};b._handleUpdatingThemeColor=function(a,b){var f=this,c=!1;d.map(a,function(h,g){d.map(h,function(d,h){var e=d.split(" "),k=!1;e.map(function(a,d){a=f._matchesPlaceholder(a);""!==a&&(f._themeColors["<"+a+">"]?
(e[d]=f._themeColors["<"+a+">"],c=k=!0):b&&!isNaN(+a)&&(e[d]=f._buildThemeColorId(+a,b),c=k=!0))});k&&(a[g][h]=e.join(" "))})});return c};b._createStyles=function(a){var f=this,c=b._pageStyles;c&&(this._styleElem?this._styleElem.innerHTML="":(this._styleElem=g(!1),document.head.appendChild(this._styleElem)),d.map(c,function(b,c){if(b=e.createClass(c,b,!0,a))f._styleElem.innerHTML+=b.innerHTML}))};b.prototype._createStyles=function(a){if(this.uncoloredStyles&&(!b._createdStyles[this.constructor.name]||
a)){var f=d.cloneObject(this.uncoloredStyles);b._handleUpdatingThemeColor(f,this.constructor.name);b._mergeIntoStyles(f);b._createStyles(a);b._createdStyles[this.constructor.name]=!0}};b._matchesPlaceholder=function(a){return(a=/<(.+?)>/.exec(a))&&a[1]?a[1]:""};b.prototype._applyColors=function(a){var b=0;for(b;b<this._colors.length;b+=1)this._colors[b]&&(a?a.setThemeColor(b,this._colors[b]):this.setThemeColor(b,this._colors[b],!0))};b._pageStyles={};b._uncoloredPageStyles={};b._themeColors={};b._createdStyles=
{};return b}(d.NamedClass);e.Stylable=a;e.createClass=function(a,f,h,e){var b="",k=c(a);k||(k={style:{}});b+="\n"+a+" {\n";var q=!1;d.map(f,function(a,c){if(!k.style[c]&&"theme"!==f[c]&&"subTheme"!==f[c]){a=b;if(c.toLowerCase()===c)var d=c;else{d=c.split("");for(var h,g=0;g<d.length;g++)h=d[g],h.toLowerCase()!==h&&(d[g]="-"+h.toLowerCase());d=d.join("")}b=a+("\t"+d+" : "+f[c]+";\n");q=!0}});b+="\n}";if(!q&&!e)return null;a=g(!h);a.innerHTML+=b;h||a.parentNode||document.head.appendChild(a);return a};
e.buildClassString=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];f="";for(var c=0;c<a.length;c+=1)a[c]&&(0<f.length&&(f+=" "),f+=a[c]);return f}})(d.Styles||(d.Styles={}))})(KIP||(KIP={}));
(function(d){function e(g,c){c||(c="");if("string"===typeof g||"number"===typeof g||"boolean"===typeof g||g instanceof Date||g instanceof Function)return g.toString();var a="";a+=c+"{";d.map(g,function(b,f){a+="\n  "+c+f+" : "+e(b,c+"  ")});return a+="\n"+c+"}\n"}d.printObject=function(d){d=e(d);console.log(d)};d.getObjectString=e})(KIP||(KIP={}));
(function(d){var e=function(){function d(c){var a=this;try{c(function(){for(var b=[],f=0;f<arguments.length;f++)b[f]=arguments[f];a._resolve(b)},function(){for(var b=[],f=0;f<arguments.length;f++)b[f]=arguments[f];a._reject(b)})}catch(b){this._reject(b)}}d.prototype.then=function(c){this._thenListener=c;return this};d.prototype.catch=function(c){this._catchListener=c;return this};d.prototype._resolve=function(){for(var c=this,a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];window.setTimeout(function(){c._thenListener&&
c._thenListener(a)},0)};d.prototype._reject=function(){for(var c=this,a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];window.setTimeout(function(){c._catchListener&&c._catchListener(a)},0)};d.resolve=function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];return new d(function(a,f){a(c)})};d.reject=function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];return new d(function(a,f){f(c)})};return d}();d.KipPromise=e})(KIP||(KIP={}));
(function(d){function e(){c+=1;return"gencls"+c}function g(a,b,f){d.map(b,function(a,c){a=a.replace("<width>",f.offsetWidth+1+"px");a=a.replace("<height>",f.offsetHeight+"px");a=a.replace("<left>",f.offsetLeft+"px");a=a.replace("<top>",f.offsetTop+"px");a=a.replace("<right>",f.offsetLeft+f.offsetWidth+"px");a=a.replace("<bottom>",f.offsetTop+f.offsetHeight+"px");b[c]=a});return d.Styles.createClass("."+a,b)}var c=0;d.transition=function(a,b,f,c,k){if(!a)return d.KipPromise.reject("no element");var h=
e();g(h,b,a);var l=e();f.transition||(f.transition="all ease-in-out "+c/1E3+"s");g(l,f,a);d.addClass(a,h);return new d.KipPromise(function(b,f){window.setTimeout(function(){d.addClass(a,l);window.setTimeout(function(){d.removeClass(a,h);window.requestAnimationFrame(function(){b("success");window.setTimeout(function(){d.removeClass(a,l)},10)})},c)},k)})}})(KIP||(KIP={}));(function(d){d.normalizeValue=function(d,g,c){d<g&&(d=g);d>c&&(d=c);return d}})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a){var b=e.call(this)||this;b._addClassName("Drawable");b._elems={};a&&(b._elems.base=d.createElement(a));if(b._shouldSkipCreateElements())return b;b._createElements();return b}__extends(c,e);Object.defineProperty(c.prototype,"base",{get:function(){return this._elems.base},enumerable:!0,configurable:!0});c.prototype._shouldSkipCreateElements=function(){return!1};c.prototype.draw=function(a,b){var f=this;if(this._elems&&this._elems.base)if(this._hasCreatedStyles){if(this._refresh(),
this._parent=a||this._parent)this._drawBase(),this._afterDraw()}else window.setTimeout(function(){f.draw(a,b)},0)};c.prototype._drawBase=function(a){var b=this._elems.base;if(a||!b.parentNode)a&&b.parentNode&&b.parentNode.removeChild(b),this._parent&&this._parent.appendChild(b)};c.prototype.erase=function(){var a=this._elems.base;a.parentNode&&a.parentNode.removeChild(a)};c.prototype._refresh=function(){};c.prototype._afterDraw=function(){};c.prototype._onResize=function(){};return c}(d.Styles.Stylable);
d.Drawable=e;e=function(d){function c(a){return d.call(this,a)||this}__extends(c,d);c.prototype._createElements=function(){};return c}(e);d.SimpleDrawable=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a){var b=this;a||(a={});a.cls=(a.cls||"")+" editable";b=e.call(this,a)||this;b._addClassName("Editable");b.type=a.inputType;b.value=a.value;b.onValidate=a.onValidate;b.onUpdate=a.onUpdate;b.formatFunc=a.formatFunc;b.onUnformat=a.onUnformat;b.formatFunc||(b.formatFunc=function(a){return a?a.toString():""});b.onUnformat||(b.onUnformat=function(a){return a});b._isModifying=!1;b._createElements();b._addListeners();return b}__extends(c,e);c.prototype._shouldSkipCreateElements=
function(){return!0};c.prototype._createElements=function(){var a=this.formatFunc(this.value);this._elems.display=d.createElement({content:a,parent:this._elems.base});this._elems.input=d.createElement({type:"input",attr:{type:this.type,value:this.value}})};c.prototype._addListeners=function(){var a=this;this.base.addEventListener("click",function(b){a._isModifying||a.modify();b.stopPropagation&&b.stopPropagation();b.cancelBubble&&(b.cancelBubble=!0)});this._elems.input.addEventListener("keydown",
function(a){});this._elems.input.addEventListener("blur",function(){a._isModifying&&a._save()})};c.prototype._save=function(){var a=this._elems.input.value;var b=this._validate(a);return b.passed?this._onValidationPassed(a):this._onValidationFailed(b.allowLeave)};c.prototype._validate=function(a){return this.onValidate?this.onValidate(a):{passed:!0}};c.prototype._onValidationFailed=function(a){d.addClass(this._elems.input,"error");a||(this._elems.input.select(),this._elems.input.focus());return!1};
c.prototype._onValidationPassed=function(a){d.removeClass(this._elems.input,"error");this.value=this.onUnformat(a);if(this.onUpdate)this.onUpdate(this.value);this.base.removeChild(this._elems.input);this.base.appendChild(this._elems.display);this._isModifying=!1;this._elems.display.innerHTML=a;return!0};c.prototype.modify=function(){if(this._isModifying)return!1;this._isModifying=!0;this._elems.input.value=this.formatFunc(this.value,!0);this.base.removeChild(this._elems.display);this.base.appendChild(this._elems.input);
this._elems.input.select();this._elems.input.focus();return!0};c._uncoloredStyles={".editable":{fontFamily:"Segoe UI, Calibri, Helvetica",fontSize:"1em",cursor:"pointer"},".editable input":{fontFamily:"Segoe UI, Calibri, Helvetica",fontSize:"1em",backgroundColor:"#eee",border:"1px solid #AAA"},".editable input:focus":{outline:"none"},".editable input.error":{borderColor:"#C30"}};return c}(d.Drawable);d.Editable=e})(KIP||(KIP={}));
(function(d){(function(e){function g(){e.colorGlobal||(e.colorGlobal=new m("hsl(330, 80%, 50%)"));return e.colorGlobal}function c(a,b){var f;b=b||0;a=a.toString(16);if(a.length<b)for(f=0;f<b-a.length;f+=1)a="0"+a;return a}e.HUE_INTERVAL=22;e.LIGHT_INTERVAL=20;e.SATURATION_INTERVAL=20;e.SATURATION_LIMITS={max:100,min:20};e.LIGHTNESS_LIMITS={max:80,min:35};var a;(function(a){a[a.HUE=1]="HUE";a[a.SATURATION=2]="SATURATION";a[a.LIGHTNESS=3]="LIGHTNESS";a[a.ALPHA=4]="ALPHA"})(a=e.HSLPieceEnum||(e.HSLPieceEnum=
{}));var b;(function(a){a[a.RED=0]="RED";a[a.GREEN=1]="GREEN";a[a.BLUE=2]="BLUE";a[a.ALPHA=3]="ALPHA"})(b=e.RGBEnum||(e.RGBEnum={}));var f;e.generateColor=function(b,c){f||(f={});var d=g().getNextColor(c||a.HUE);c=new l(d);b&&(f[b]=d);return c};e.getCurrentColor=function(){return g().getCurrentColor()};e.getApparentColor=function(a,b,f){a=new q(a,f);a.getApparentColor(b);return a.hexString()};e.getComplementaryColor=function(a,b){b=b||45;a=new q(a);a.getLightness()<b?a.lightness=95:a.lightness=5;
a.generateRgbValues();return a.rgbaString()};e.hexToRgb=function(a){return(new l(a)).rgbString()};e.hexToRgba=function(a,b){return(new l(a,b)).rgbaString()};e.hslToRgb=function(a){return(new m(a)).rgbString()};e.hslaToRgba=function(a,b){return(new m(a,b)).rgbaString()};e.fullHexString=c;var h=function(f){function h(){var a=f.call(this,"Color")||this;a._alpha=1;return a}__extends(h,f);Object.defineProperty(h.prototype,"alpha",{set:function(a){this._alpha=a=Math.min(1,Math.max(0,a))},enumerable:!0,
configurable:!0});Object.defineProperty(h.prototype,"red",{set:function(a){this._red=a=Math.min(255,Math.max(0,Math.round(a)))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"green",{set:function(a){this._green=a=Math.min(255,Math.max(0,Math.round(a)))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"blue",{set:function(a){this._blue=a=Math.min(255,Math.max(0,Math.round(a)))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"hue",{set:function(a){this._hue=
a=Math.min(360,Math.max(0,Math.round(a)))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"saturation",{set:function(a){this._saturation=a=Math.min(100,Math.max(0,Math.round(a)))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"lightness",{set:function(a){this._lightness=a=Math.min(100,Math.max(0,Math.round(a)))},enumerable:!0,configurable:!0});h.prototype.rgbaString=function(){return this.rgbString(!0)};h.prototype.rgbString=function(a){var b="rgb"+(a?"a":"")+
"("+this._red+", "+this._green+", "+this._blue;a&&(b+=", "+this._alpha);return b+")"};h.prototype.hslString=function(a){this._hue||this.generateHslValues();var b="hsl"+(a?"a":"")+"("+this._hue+", "+this._saturation+"%, "+this._lightness+"%";a&&(b+=", "+this._alpha);return b+")"};h.prototype.hslaString=function(){return this.hslString(!0)};h.prototype.hexString=function(a){var b="#"+c(this._red,2);b+=c(this._green,2);b+=c(this._blue,2);a&&(b+=c(this._alpha,2));return b};h.prototype.generateHslValues=
function(){var a=this._red/255;var b=this._green/255;var f=this._blue/255;var c=Math.max(a,b,f);var d=Math.min(a,b,f);var h=c-d;var e=(c+d)/2;c===d?(this._saturation=this._hue=0,this._lightness=Math.round(100*e)):(c===a?(a=(b-f)/h,b<f&&(a+=6)):a=c===b?(f-a)/h+2:(a-b)/h+4,this._hue=Math.round(a/6*3600)/10,this._saturation=Math.round(1E3*(.5<e?h/(2-c-d):h/(c+d)))/10,this._lightness=Math.round(1E3*e)/10,this._startHue||(this._startHue=this._hue,this._startSaturation=this._saturation,this._startLightness=
this._lightness))};h.prototype.generateRgbValues=function(){var a;var b=this._hue/360;var f=this._saturation/100;var c=this._lightness/100;0===f&&(this._red=this._green=this._blue=c,this._red*=255,this._green*=255,this._blue*=255);f=.5>c?c*(1+f):c+f-c*f;c=2*c-f;for(a=-1;1>=a;a+=1){var d=b+-a/3;0>d?d+=1:1<d&&--d;d<1/6?this.updateRgbValue(a+1,255*(c+6*(f-c)*d)):.5>d?this.updateRgbValue(a+1,255*f):d<2/3?this.updateRgbValue(a+1,255*(c+(f-c)*(2/3-d)*6)):this.updateRgbValue(a+1,255*c)}};h.prototype._parseFromHexColor=
function(a,b){var f,c;if(!/^#?(?:[0-9A-Fa-f]{3,4}){1,2}$/.test(a))return!1;"#"===d.charAt(a,0)&&(a=d.rest(a,1));var h=6>a.length?1:2;for(f=0;f<a.length;f+=h){var e=a.substr(f,h);1===h&&(e+=e);e=parseInt(e,16);this.updateRgbValue(f/h,e);4<f&&(c=!0)}c||(this._alpha=b||1);return!0};h.prototype._parseFromRgbColor=function(a,b){var f=/rgb\((?:([0-9]{1-3}), ?){3}\)/;var c=/rgba\((?:([0-9]{1-3}), ?){3}, ?([0-9]{0,1}(?:\.[0-9]+)?)\)/;if(f.test(a))a=f.exec(a);else if(c.test(a))a=c.exec(a);else return!1;this._red=
+a[1];this._green=+a[2];this._blue=+a[3];if(void 0!==a[4]||void 0!==b)this._alpha=+a[4]||b;return!0};h.prototype._parseFromHslColor=function(a,b){var f=/hsl\(([0-9]{1,3}), ?([0-9]{1,3})%, ?([0-9]{1,3})%\)/;var c=/hsla\(([0-9]{1,3}), ?([0-9]{1,3})%, ?([0-9]{1,3})%, ?([0-9]{0,1}(?:\.[0-9]+)?)\)/;if(f.test(a))a=f.exec(a);else if(c.test(a))a=c.exec(a);else return!1;this._hue=Math.round(10*parseFloat(a[1]))/10;this._saturation=Math.round(10*parseFloat(a[2]))/10;this._lightness=Math.round(10*parseFloat(a[3]))/
10;if(void 0!==a[4]||void 0!==b)this._alpha=parseFloat(a[4])||b;this.generateRgbValues();return!0};h.prototype._parseColorString=function(a,b){var f;return(f=this._parseFromRgbColor(a,b))||(f=this._parseFromHexColor(a,b))?!0:(f=this._parseFromHslColor(a,b))?!0:!1};h.prototype.updateRgbValue=function(a,f){switch(a){case b.RED:this.red=f;break;case b.GREEN:this.green=f;break;case b.BLUE:this.blue=f;break;case b.ALPHA:this.alpha=f}};h.prototype.updateHslValue=function(b,f){switch(b){case a.HUE:this.hue=
f;break;case a.SATURATION:this.saturation=f;break;case a.LIGHTNESS:this.lightness=f;break;case a.ALPHA:this.alpha=f}};h.prototype.getNextColor=function(a,b){var f=[];this._startHue||this.generateHslValues();f[0]=a;f[1]=(a+1)%3;f[2]=(a+2)%3;for(a=0;a<f.length&&this.rotateAppropriateHSLValue(f[a]);a+=1);this.generateRgbValues();return this.hexString(b)};h.prototype.rotateAppropriateHSLValue=function(b){switch(b){case a.SATURATION:var f=this.rotateSaturation();var c=this._startSaturation;break;case a.LIGHTNESS:f=
this.rotateLightness();c=this._startLightness;break;case a.HUE:f=this.rotateHue(),c=this._startHue}return f===c?!0:!1};h.prototype.rotateHue=function(){return this._hue=this.rotateHslValue(this._hue,e.HUE_INTERVAL,360)};h.prototype.rotateSaturation=function(){return this._saturation=this.rotateHslValue(this._saturation,e.SATURATION_INTERVAL,100,e.SATURATION_LIMITS.max,e.SATURATION_LIMITS.min)};h.prototype.rotateLightness=function(){return this._lightness=this.rotateHslValue(this._lightness,e.LIGHT_INTERVAL,
100,e.LIGHTNESS_LIMITS.max,e.LIGHTNESS_LIMITS.min)};h.prototype.rotateHslValue=function(a,b,f,c,h){var e=a+=b;e%=f;if(!c||!h&&0!==h)return d.roundToPlace(e,10);for(;e<h||e>c;)e=a+=b,e%=f;return d.roundToPlace(e,10)};h.prototype.getApparentColor=function(a){a=a._red?a:new q(a);if(!a._parsedCorrectly)return!1;var b=1-this._alpha;this._red=Math.round(this._red*this._alpha+a._red*b);this._green=Math.round(this._green*this._alpha+a._green*b);this._blue=Math.round(this._blue*this._alpha+a._blue*b);this._alpha=
1;return!0};h.prototype.compare=function(a,b){b||(b={hue:1,saturation:.04,lightness:.04,alpha:.04});a.generateHslValues();this.generateHslValues();a={hue:a._hue-this._hue,saturation:a._saturation-this._saturation,lightness:a._lightness-this._lightness,alpha:a._alpha-this._alpha,total:0};a.total+=Math.abs(a.hue)*(b.hue||0);a.total+=Math.abs(a.saturation)*(b.saturation||0);a.total+=Math.abs(a.lightness)*(b.lightness||0);a.total+=Math.abs(a.alpha)*(b.alpha||0);return a};h.prototype.averageIn=function(a,
b){a.generateHslValues();this.generateHslValues();a={hue:(this._hue+a._hue)/2,saturation:(this._saturation+a._saturation)/2,lightness:(this._lightness+a._lightness)/2,alpha:(this._alpha+a._alpha)/2};if(b)return a;this._hue=Math.round(a.hue);this._saturation=Math.floor(10*a.saturation)/10;this._lightness=Math.floor(10*a.lightness)/10;this._alpha=Math.floor(10*a.alpha)/10;return this};h.prototype.equals=function(a){return this.hexString(!0)===a.hexString(!0)};h.prototype.isDark=function(){this._hue||
this.generateHslValues();return 50>=this._lightness};h.prototype.isLight=function(){this._hue||this.generateHslValues();return 50<this._lightness};h.prototype.getLightness=function(){this._hue||this.generateHslValues();return this._lightness};return h}(d.NamedClass);e.Color=h;var k=function(a){function b(b,f,c,d){var h=a.call(this)||this;"string"===typeof b?h._parsedCorrectly=h._parseFromRgbColor(b,f):(h.red=b,h.green=f,h.blue=c,h.alpha=d,h._parsedCorrectly=!0);return h}__extends(b,a);b.prototype.getCurrentColor=
function(a){return this.rgbString(a)};return b}(h);e.RGBColor=k;var m=function(a){function b(b,f,c,d){var h=a.call(this)||this;"string"===typeof b?h._parsedCorrectly=h._parseFromHslColor(b,f):(h.hue=b,h.saturation=f,h.lightness=c,h.alpha=d,h._parsedCorrectly=!0);return h}__extends(b,a);b.prototype.getCurrentColor=function(a){return this.hslString(a)};return b}(h);e.HSLColor=m;var l=function(a){function b(b,f){f=a.call(this)||this;f._parsedCorrectly=f._parseFromHexColor(b);return f}__extends(b,a);
b.prototype.getCurrentColor=function(a){return this.hexString(a)};return b}(h);e.HexColor=l;var q=function(a){function b(b,f){var c=a.call(this)||this;c._parsedCorrectly=c._parseColorString(b,f);return c}__extends(b,a);b.prototype.getCurrentColor=function(a){return this.hexString(a)};return b}(h);e.AnyColor=q})(d.Colors||(d.Colors={}))})(KIP||(KIP={}));
(function(d){var e;(function(c){c[c.ReplaceDuplicateKeys=1]="ReplaceDuplicateKeys";c[c.IgnoreDuplicateKeys=2]="IgnoreDuplicateKeys"})(e=d.CollectionTypeEnum||(d.CollectionTypeEnum={}));var g=function(c){function a(a,f){var b=c.call(this,"Collection")||this;b._data={};b._sortedData=[];b._addType=a||e.IgnoreDuplicateKeys;b._equalityTest=f;b._equalityTest||(b._equalityTest=function(a,b){return a===b});return b}__extends(a,c);Object.defineProperty(a.prototype,"addType",{set:function(a){this._addType=
a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"length",{get:function(){return this._sortedData.length},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"equalityTest",{set:function(a){this._equalityTest=a},enumerable:!0,configurable:!0});a.prototype.addElement=function(a,f){var b;if(this._addType===e.IgnoreDuplicateKeys&&this._data[a])return-1;this._data[a]&&(b=!0);var c=this._sortedData.length;this._data[a]={key:a,value:f,sortedIdx:c,origIdx:c};b||this._sortedData.push(a);
return c};a.prototype.insertElement=function(a,f,c){return!0};a.prototype.removeElement=function(a){if("string"===typeof a)return this._removeElementByKey(a);if("number"===typeof a)return this._removeElementByIndex(a)};a.prototype.removeElementByValue=function(a){return this._removeElementByValue(a)};a.prototype._removeElementByKey=function(a){var b=this._data[a];if(!b)return null;this._sortedData.splice(b.sortedIdx,1);this._resetSortedKeys(b.sortedIdx);delete this._data[a];return b};a.prototype._removeElementByIndex=
function(a){return a>=this.length||0>a?null:this._removeElementByKey(this._sortedData[a])};a.prototype._removeElementByValue=function(a){a=this._findElement(a);return this._removeElementByKey(a&&a.key)};a.prototype._resetSortedKeys=function(a,f){a||(a=0);f||0===f||(f=this._sortedData.length);if(!(a>f)){if(a>f){var b=a;a=f;f=b}for(;a<f;a+=1)if(b=this._sortedData[a])if(b=this._data[b])b.sortedIdx=a}};a.prototype.clear=function(){this._data={};this._sortedData=[]};a.prototype.sort=function(a){var b=
this;this._sortedData.sort(function(f,c){return a(b._data[f],b._data[c])});this._resetSortedKeys()};a.prototype.resetLoop=function(a){this._iteration=a?this.length+1:-1};a.prototype.hasNext=function(a){return a?0<=this._iteration-1:this._iteration+1<this._sortedData.length};a.prototype.getNext=function(a){a?--this._iteration:this._iteration+=1;return this._data[this._sortedData[this._iteration]]};a.prototype.toArray=function(){for(var a,f=0,c=this._sortedData;f<c.length;f++)a=c[f],(void 0).push(this._data[a])};
a.prototype.getElement=function(a){if("string"===typeof a)var b=this._data[a];else if("number"===typeof a){if(0>a||a>this._sortedData.length)return null;b=this._data[this._sortedData[a]]}return b};a.prototype.getValue=function(a){return(a=this.getElement(a))?a.value:null};a.prototype.getIndex=function(a){return"string"===typeof a?this._data[a]&&this._data[a].sortedIdx:(a=this._findElement(a))&&a.sortedIdx};a.prototype._findElement=function(a){var b;for(b in this._data)if(this._data.hasOwnProperty(b)){var c=
this._data[b];if(this._equalityTest(c.value,a))return c}return null};a.prototype.getKey=function(a){return"number"===typeof a?this._sortedData[a]:(a=this._findElement(a))&&a.key};a.prototype.hasElement=function(a){return"string"===typeof a?!!this._data[a]:"number"===typeof a?!!this._sortedData[a]&&!!this._data[this._sortedData[a]]:null!==this._findElement(a)};a.prototype.map=function(a){if(a)for(this.resetLoop();this.hasNext();){var b=this.getNext();if(b){var c=b.value;b=b.key;var d=this.getIndex(b);
a(c,b,d)}}};a.prototype.toString=function(){var a="";this.map(function(b,c,e){0<a.length&&(a+=", ");a+=d.format("{0} => {1}",c,b.toString())});return a};a.prototype.equals=function(a){if(this.length!==a.length||this._sortedData.length!==a._sortedData.length)return!1;var b=!1;this.map(function(f,c,e){a._data[c]||(b=!0);d.equals(f,a._data[c].value)||(b=!0)});return b?!1:!0};return a}(d.NamedClass);d.Collection=g})(KIP||(KIP={}));
(function(d){(function(e){var g=function(){function c(a){this._numOfListeners=0;this._name=a.name;this._key=a.key;this._listeners=new d.Collection(d.CollectionTypeEnum.ReplaceDuplicateKeys)}Object.defineProperty(c.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0});c.prototype.addListener=function(a){a.uniqueId=a.uniqueId||this._key+this._numOfListeners.toString();this._listeners.addElement(a.uniqueId,a);this._numOfListeners+=1};c.prototype.removeEventListener=
function(a){a&&this._listeners.removeElement(a)};c.prototype.notifyListeners=function(a){var b=this;this._context=a;this._listeners.map(function(f,c){f&&(f.target&&!d.equals(f.target,a.target)||f.func(b))});this._context=null};return c}();e.Event=g})(d.Events||(d.Events={}))})(KIP||(KIP={}));
(function(d){(function(e){var g=function(){function c(){}c.createEvent=function(a){var b=new e.Event(a);return-1!==this._events.addElement(a.key,b)};c.dispatchEvent=function(a,b){(a=this._events.getValue(a))&&a.notifyListeners(b)};c.addEventListener=function(a,b){(a=this._events.getValue(a))&&a.addListener(b)};c.removeEventListener=function(a,b){a&&(b?(b=this._events.getValue(b))&&b.removeEventListener(a):this._events.map(function(b){b.removeEventListener(a)}))};c._events=new d.Collection;return c}();
e.createEvent=function(c){return g.createEvent(c)};e.dispatchEvent=function(c,a){g.dispatchEvent(c,a)};e.addEventListener=function(c,a){g.addEventListener(c,a)}})(d.Events||(d.Events={}))})(KIP||(KIP={}));
(function(d){(function(d){d[d.MAIN_COLOR=0]="MAIN_COLOR";d[d.FONT_COLOR=1]="FONT_COLOR";d[d.SUB_MENU_COLOR=2]="SUB_MENU_COLOR";d[d.SUB_MENU_BORDER=3]="SUB_MENU_BORDER";d[d.SUB_SUB_MENU_COLOR=4]="SUB_SUB_MENU_COLOR";d[d.SUB_SUB_MENU_BORDER=5]="SUB_SUB_MENU_BORDER"})(d.ContextMenuColors||(d.ContextMenuColors={}));var e=function(e){function c(a,b,f){var c=e.call(this,{cls:"ctxMenu"})||this;c._addClassName("ContextMenu");c._target=a;c._noStyles=b;c._themes=f||"rgba(40,40,40,1) #FFF rgba(40,40,40,.9) #777 rgba(40,40,40,.85) #888 #505050 #999".split(" ");
c._options=new d.Collection;c._createElements();c._addEventListeners();return c}__extends(c,e);Object.defineProperty(c.prototype,"base",{get:function(){return this._elems.base},enumerable:!0,configurable:!0});c.prototype.addOption=function(a,b,f){if(this._options.hasElement(a.label))return!1;a.elems||(a.elems={});a.elems.base||(f||(f=this._elems.option_container),a.elems.base=d.createSimpleElement("","ctxOption",a.label,null,null,f),a.elems.base.onclick=a.callback);this._options.addElement(a.label,
a);f=!0;for(var c=0;c<b.length;c++)this.addSubOption(a,b[c])||(f=!1);return f?!0:!1};c.prototype.addSubOption=function(a,b){if(!a.elems&&(this._options.hasElement(a.label)||this.addOption(a),a=this._getOption(a.label),!a)||!a.elems)return!1;a.elems.sub_menu||this._buildSubMenu(a);this.addOption(b,[],a.elems.sub_menu)};c.prototype._buildSubMenu=function(a){a.elems.sub_menu=d.createSimpleElement("","subMenu hidden","",null,null,a.elems.base);a.elems.base.innerHTML+="...";this._noStyles&&(a.elems.sub_menu.style.display=
"none",a.elems.base.addEventListener("mouseover",function(){a.elems.sub_menu.style.display="block"}),a.elems.base.addEventListener("mouseout",function(){a.elems.sub_menu.style.display="none"}))};c.prototype._getOption=function(a){return a?(a=this._options.getElement(a))?a.value:null:null};c.prototype.removeOption=function(a){a=this._options.removeElement(a);if(!a)return!1;a=a.value;if(a.elems.base.parentNode)a.elems.base.parentNode.removeChild(a.elems.base);else return!1;return!0};c.prototype.clearOptions=
function(){this._options.resetLoop(!0);for(var a;this._options.hasNext(!0);)if(a=this._options.getNext(!0))a=a.value,a.elems.base.parentNode&&a.elems.base.parentNode.removeChild(a.elems.base);this._options.clear()};c.prototype._addEventListeners=function(){var a=this;c._windowListenersAdded||(window.addEventListener("contextmenu",function(){a._hideExistingMenu()}),window.addEventListener("mousedown",function(){a._hideExistingMenu()}),c._windowListenersAdded);this._target.addEventListener("contextmenu",
function(b){a.erase();if(b.ctrlKey)return!0;b.stopPropagation();b.preventDefault();var f=b.clientX;b=b.clientY;a.base.style.left=f+"px";a.base.style.top=b+"px";a.draw(document.body);f+a.base.offsetWidth>window.innerWidth&&(f=window.innerWidth-a.base.offsetWidth);b+a.base.offsetHeight>window.innerHeight&&(b=window.innerHeight-a.base.offsetHeight);a.base.style.left=f+"px";a.base.style.top=b+"px";return!1})};c.prototype._createElements=function(){this._elems.option_container=d.createSimpleElement("",
"optionContainer","",null,null,this.base);this._setThemeColors()};c.prototype._setThemeColors=function(){var a=0;for(a;a<this._themes.length;a+=1)this.setThemeColor(a,this._themes[a])};c.prototype._hideExistingMenu=function(){c._showingMenu&&c._showingMenu.base.parentNode&&c._showingMenu.base.parentNode.removeChild(c._showingMenu.base)};c._uncoloredStyles={".ctxMenu":{backgroundColor:"<0>",color:"<1>",fontFamily:"'Calibri Light', Helvetica",boxShadow:"1px 1px 3px 2px rgba(0,0,0,.1)",fontSize:"14px",
borderRadius:"4px",paddingTop:"2px",paddingBottom:"2px",width:"10%",position:"absolute"},".ctxMenu .subMenu":{backgroundColor:"<2>",width:"100%",top:"-2px",boxShadow:"1px 1px 1px 1px rgba(0,0,0,.1)",left:"calc(100% - 1px)",borderLeft:"1px solid <3>"},".ctxMenu .subMenu .subMenu":{backgroundColor:"<4>",borderLeft:"1px solid <5>"},".ctxMenu .ctxOption":{padding:"4px 10px",cursor:"pointer",position:"relative"},".ctxMenu .ctxOption:hover":{backgroundColor:"<6>",color:"<2>",borderLeft:"7px solid <7>"}};
return c}(d.Drawable);d.ContextMenu=e})(KIP||(KIP={}));
(function(d){d.createSVG=function(d,g,c,a,b,f){try{var h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("version","1.1");d&&h.setAttribute("id",d);void 0!==g&&h.setAttribute("width",g.toString()||"0");void 0!==c&&h.setAttribute("height",c.toString()||"0");h.setAttribute("viewBox",a||"0 0 0 0");b&&(h.innerHTML=b);h.setAttribute("preserveAspectRatio",f||"xMinYMin meet");return h}catch(k){throw Error("svg creation failed");}};d.createSVGElem=function(d,g){try{var c;var a=
document.createElementNS("http://www.w3.org/2000/svg",d);for(c in g)g.hasOwnProperty(c)&&a.setAttribute(c,g[c]);return a}catch(b){return console.log("Error creating SVG element"),null}}})(KIP||(KIP={}));
(function(d){var e;(function(a){a[a.DragEnter=0]="DragEnter";a[a.DragLeave=1]="DragLeave";a[a.Drop=2]="Drop";a[a.Move=3]="Move"})(e=d.DraggableFunctions||(d.DraggableFunctions={}));var g=function(a){function b(b,c,e){var f=a.call(this,b)||this;f._addClassName("Draggable");f._useNonStandard=e;f._targets=[];c?f._targets.push(c):f._targets.push(document.body);d.addClass(f._elems.base,"draggable");f._addDefaultEventFunctions();f._isDragging=!1;window.setTimeout(function(){e?f._addNonStandardDragEventListeners():
f._addStandardDragEventListeners()},0);return f}__extends(b,a);Object.defineProperty(b.prototype,"dragEnterFunc",{set:function(a){this._dragEnterFunc=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dragLeaveFunc",{set:function(a){this._dragLeaveFunc=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dropFunc",{set:function(a){this._dropFunc=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"moveFunc",{set:function(a){this._moveFunc=a},enumerable:!0,
configurable:!0});b.prototype._addDefaultEventFunctions=function(){var a=this._elems.base;this._moveFunc=function(b){var f=(parseInt(a.style.left)||0)+b.x;b=(parseInt(a.style.top)||0)+b.y;a.style.left=f+"px";a.style.top=b+"px"};this._dragEnterFunc=function(a,b){b.preventDefault()};this._dragLeaveFunc=function(a,b){b.preventDefault()};this._dropFunc=function(b,f){f.preventDefault();a.parentNode!==b&&(a.parentNode&&a.parentNode.removeChild(a),b.appendChild(a))}};b.prototype._addStandardDragEventListeners=
function(){var a=this,b=this._elems.base;b.setAttribute("draggable","true");b.addEventListener("dragstart",function(b){a._isDragging=!0;a._updateMousePoint(b);b.dataTransfer.dropEffect="move"});b.addEventListener("drag",function(a){});b.addEventListener("dragend",function(b){a._isDragging=!1});for(var c=0,d=this._targets;c<d.length;c++)b=d[c],this._addStandardTargetEventListeners(b)};b.prototype._addNonStandardDragEventListeners=function(){var a=this;this._elems.base.addEventListener("mousedown",
function(f){a._isDragging=!0;a._updateMousePoint(f);window.addEventListener("mousemove",b);window.addEventListener("mouseup",c);window.addEventListener("mouseout",d)});for(var b=function(b){if(a._isDragging){var f=a._getDelta(b);a._updateMousePoint(b);a._onMove(f)}},c=function(a){e()},d=function(a){a.relatedTarget||e()},e=function(){a._isDragging&&(a._isDragging=!1,window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",c),window.removeEventListener("mouseout",d))},g,p=0,n=
this._targets;p<n.length;p++)g=n[p],this._addNonStandardTargetEventListeners(g)};b.prototype._addNonStandardTargetEventListeners=function(a){var b=this;a.addEventListener("mouseup",function(f){b._isDragging&&b._onDropOnTarget(a,f)});a.addEventListener("mouseover",function(f){b._isDragging&&b._onDragEnterTarget(a,f)});a.addEventListener("mouseout",function(f){b._isDragging&&b._onDragLeaveTarget(a,f)})};b.prototype._addStandardTargetEventListeners=function(a){var b=this;a.addEventListener("dragover",
function(f){b._onDragEnterTarget(a,f)});a.addEventListener("dragexit",function(f){b._onDragLeaveTarget(a,f)});a.addEventListener("drop",function(f){b._onDropOnTarget(a,f)})};b.prototype.addDragTarget=function(a){this._targets.push(a);this._useNonStandard?this._addNonStandardTargetEventListeners(a):this._addStandardTargetEventListeners(a)};b.prototype._onDragEnterTarget=function(a,b){this._dragEnterFunc(a,b)};b.prototype._onDragLeaveTarget=function(a,b){this._dragLeaveFunc(a,b)};b.prototype._onMove=
function(a){this._moveFunc(a)};b.prototype._onDropOnTarget=function(a,b){this._dropFunc(a,b)};b.prototype.overrideFunctions=function(a,b,c,d,g){a&&this._overrideFunction(e.DragEnter,this._dragEnterFunc,a,g);b&&this._overrideFunction(e.DragLeave,this._dragLeaveFunc,b,g);c&&this._overrideFunction(e.Drop,this._dropFunc,c,g);d&&this._overrideFunction(e.Move,this._moveFunc,d,g)};b.prototype._overrideFunction=function(a,b,c,d){var f=this;switch(a){case e.DragEnter:this._dragEnterFunc=a=function(a,h){d&&
b.call(f,a,h);c.call(f,a,h)};break;case e.DragLeave:this._dragLeaveFunc=a=function(a,h){d&&b.call(f,a,h);c.call(f,a,h)};break;case e.Drop:this._dropFunc=a=function(a,h){d&&b.call(f,a,h);c.call(f,a,h)};break;case e.Move:this._moveFunc=a=function(a){d&&b.call(f,a);c.call(f,a)}}};b.prototype._getDelta=function(a){return{x:a.clientX-this._mousePoint.x,y:a.clientY-this._mousePoint.y}};b.prototype._updateMousePoint=function(a){this._mousePoint={x:a.clientX,y:a.clientY}};b._uncoloredStyles={".draggable":{position:"absolute !important",
cursor:"-webkit-grab"},".draggable.grabbing":{cursor:"-webkit-grabbing"},".droppable":{cursor:"pointer"}};return b}(d.Drawable);d.Draggable=g;var c=function(a){function b(b,c,d){c=a.call(this,null,c,d)||this;c._elems={base:b};return c}__extends(b,a);b.prototype._createElements=function(){};return b}(g);d.ExistingDraggable=c;d.makeDraggable=function(a,b,f,d,e,g,l){a=new c(a,b,f);a.overrideFunctions(d,e,g,l);return a.base}})(KIP||(KIP={}));
(function(d){(function(a){a[a.solid=0]="solid";a[a.none=1]="none"})(d.FillTypeEnum||(d.FillTypeEnum={}));(function(a){a[a.regular=0]="regular";a[a.bold=1]="bold";a[a.italic=2]="italic";a[a.light=3]="light"})(d.FontWeightEnum||(d.FontWeightEnum={}));(function(a){a[a.solid=0]="solid";a[a.dashed=1]="dashed";a[a.dotted=2]="dotted"})(d.StrokeTypeEnum||(d.StrokeTypeEnum={}));var e;(function(a){a[a.linear=0]="linear";a[a.radial=1]="radial"})(e=d.SVGGradientTypeEnum||(d.SVGGradientTypeEnum={}));var g;(function(a){a[a.checkmark=
0]="checkmark";a[a.ex=1]="ex";a[a.plus=2]="plus"})(g=d.SVGShapeEnum||(d.SVGShapeEnum={}));var c=function(a){function b(b,c,e){var f=a.call(this)||this;d.isHTMLElement(c)?(f._parent=c,c=d.createElement({parent:c}),f._bounds={x:0,y:0,w:f._parent.offsetLeft-c.offsetLeft,h:f._parent.offsetTop-c.offsetTop},f._parent.removeChild(c)):f._bounds=c;f.base=d.createSVG(b,f._bounds.w,f._bounds.h);f._definitionsElement=d.createSVGElem("defs");f.base.appendChild(f._definitionsElement);f._extrema={min:{x:1E6,y:1E6},
max:{x:0,y:0}};f._view={x:0,y:0,w:0,h:0};f._options=d.reconcileOptions(e,{gutter:1,auto_resize:!0,zoom_x:.08,zoom_y:.08,pan_x:!0,pan_y:!0,prevent_events:!1});f._svgElems=new d.Collection;f._nonScaled=[];f._addEventListeners();return f}__extends(b,a);Object.defineProperty(b.prototype,"fillStyle",{get:function(){return this.__fillStyle},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"strokeStyle",{get:function(){return this.__strokeStyle},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"fontStyle",{get:function(){return this.__fontStyle},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"width",{set:function(a){this._bounds.w=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{set:function(a){this._bounds.h=a},enumerable:!0,configurable:!0});b.prototype._createElements=function(){};b.prototype._addEventListeners=function(){var a=this;this.base.addEventListener("wheel",function(b){a._onZoom(0<b.deltaY?1:-1)});d.makeDraggable(this.base,document.body,
!0,null,null,null,function(b){a._onPan(b)})};b.prototype._onZoom=function(a){var b=this._view.w*this._options.zoom_x*a;a*=this._view.h*this._options.zoom_y;this._options.zoom_x&&(this._view.x-=b,this._view.w+=2*b);this._options.zoom_y&&(this._view.y-=a,this._view.h+=2*a);this.generateViewboxAttribute(!0)};b.prototype._onPan=function(a){this._options.pan_x&&(this._view.x+=a.x);this._options.pan_y&&(this._view.y+=a.y);this.generateViewboxAttribute(!0)};b.prototype.generateViewboxAttribute=function(a){0>
this._view.w&&(this._view.w=1);0>this._view.h&&(this._view.h=1);var b=this._view.x+" "+this._view.y+" "+this._view.w+" "+this._view.h;a&&this.base.setAttribute("viewbox",b);return b};b.prototype._calculateView=function(){if(!this._options.auto_resize)return!1;this._view.x=this._extrema.min.x;this._view.y=this._extrema.min.y;this._view.w=this._extrema.max.x-this._extrema.min.x;this._view.h=this._extrema.max.y-this._extrema.min.y;return!0};b.prototype._updateExtrema=function(a){a=d.isIBasicRect(a)?
{min:{x:a.x,y:a.y},max:{x:a.x+a.w,y:a.y+a.h}}:d.isIPoint(a)?{max:a,min:a}:a;a.min.x<this._extrema.min.x&&(this._extrema.min.x=a.min.x);a.min.y<this._extrema.min.y&&(this._extrema.min.y=a.min.y);a.max.x>this._extrema.max.x&&(this._extrema.max.x=a.max.x);a.max.y>this._extrema.max.y&&(this._extrema.max.y=a.max.y)};b.prototype.calculateSVGCoordinates=function(a,b){a=d.isNumber(a)?{x:a,y:b}:a;return this._convertCoordinates(a,this._view,this._bounds)};b.prototype.calculateScreenCoordinates=function(a,
b){a=d.isNumber(a)?{x:a,y:b}:a;return this._convertCoordinates(a,this._bounds,this._view)};b.prototype._convertCoordinates=function(a,b,c){return{x:b.w/c.w*(a.x-c.x)+b.x,y:b.h/c.h*(a.y-c.y)+b.y}};b.prototype._convertDistance=function(a,b,c){return b/c*a};b.prototype.calculateSVGWidth=function(a){return this._convertDistance(a,this._view.w,this._bounds.w)};b.prototype.calculateSVGHeight=function(a){return this._convertDistance(a,this._view.h,this._bounds.h)};b.prototype.calculateScreenWidth=function(a){return this._convertDistance(a,
this._bounds.w,this._view.w)};b.prototype.calculateScreenHeight=function(a){return this._convertDistance(a,this._bounds.h,this._view.h)};b.prototype._addChild=function(a,b,c){if(""===a)throw Error("no SVG element type provided");a=d.createSVGElem(a,b);c?c.appendChild(a):this.base.appendChild(a);b.noScale&&this._nonScaled.push(a);b.id&&this._svgElems.addElement(b.id,a);return a};b.prototype._checkForCurrentPath=function(){if(!this._currentPath)throw Error("no path started");};b.prototype._constructPathAttribute=
function(a,b){return a+this._pointToAttributeString(b)+"\n"};b.prototype._pointToAttributeString=function(a){return a.x+" "+a.y};b.prototype._addToPathAttribute=function(a){this._checkForCurrentPath();var b=this._currentPath.getAttribute("d");this._currentPath.setAttribute("d",b+a);return!0};b.prototype.startPath=function(a,b){return this._currentPath=this._addChild("path",a,b)};b.prototype.lineTo=function(a){this._checkForCurrentPath();this._addToPathAttribute(this._constructPathAttribute("L",a))};
b.prototype.moveTo=function(a){this._checkForCurrentPath();this._addToPathAttribute(this._constructPathAttribute("M",a))};b.prototype.curveTo=function(a,b,c){this._checkForCurrentPath();b="C"+this._pointToAttributeString(b)+", ";b+=this._pointToAttributeString(c)+", ";b+=this._pointToAttributeString(a)+"\n";this._addToPathAttribute(b)};b.prototype.arcTo=function(a,b,c,d,e){b="A"+this._pointToAttributeString(b)+" ";b=b+(c+" "+d+" "+e+" ")+(this._pointToAttributeString(a)+"\n");this._addToPathAttribute(b)};
b.prototype.closePath=function(){this._checkForCurrentPath();this._addToPathAttribute(" Z");this.finishPathWithoutClosing()};b.prototype.finishPathWithoutClosing=function(){delete this._currentPath};b.prototype.addPath=function(a,b,c,d){b||(b={});b=this.startPath(b,c);c=!0;for(var f=0;f<a.length;f++){var h=a[f];c?(this.moveTo(h.point),c=!1):h.controls?this.curveTo(h.point,h.controls[0],h.controls[1]):h.radius?this.arcTo(h.point,h.radius,h.xRotation,h.largeArc,h.sweepFlag):this.lineTo(h.point);this._options.auto_resize&&
this._updateExtrema(h.point)}d?this.finishPathWithoutClosing():this.closePath();return b};b.prototype.addRectangle=function(a,b,c,d,e,g){"number"===typeof a?(a={x:a,y:b,w:c,h:d},c=g):e=b;return this._addRectangleHelper(a,e,c)};b.prototype._addRectangleHelper=function(a,b,c){this._checkBasicRectForBadData(a);b||(b={});b.x=a.x;b.y=a.y;b.width=a.w;b.height=a.h;b=this._addChild("rect",b,c);this._options.auto_resize&&this._updateExtrema(this._basicRectToExtrema(a));return b};b.prototype.addCircle=function(a,
b,c,d){c||(c={});c.cx=a.x;c.cy=a.y;c.r=b;c=this._addChild("circle",c,d);this._options.auto_resize&&this._updateExtrema(this._extremaFromCenterPointAndRadius(a,b));return c};b.prototype.addPerfectArc=function(a,b,c,e,g,q,p,n){var f=e-c,h=this.__strokeStyle.width*Math.sqrt(2),k={x:a.x+h,y:a.y+h};h=this._calculatePolygonPoint(k,d.Trig.degreesToRadians(c),b);k=this._calculatePolygonPoint(k,d.Trig.degreesToRadians(e),b);p||(p={});p=this.startPath(p,n);this.moveTo(h);this.arcTo(k,{x:b,y:b},0,180<f?1:0,
g);this._options.auto_resize&&(b=this._arcToExtrema(h,k,a,b,c,e),this._updateExtrema(b));if(q)return this.finishPathWithoutClosing(),p;this.lineTo(a);this.closePath();return p};b.prototype.regularPolygon=function(a,b,c,e,g){for(var f,h=0,k=d.Trig.calculatePolygonInternalAngle(b),m=0;m<b;m+=1){var l=this._calculatePolygonPoint(a,h,c);h+=k;f+=l.x+","+l.y+" "}e||(e={});e.points=f;b=this._addChild("polygon",e,g);this._options.auto_resize&&this._updateExtrema(this._extremaFromCenterPointAndRadius(a,c));
return b};b.prototype.addRegularStar=function(a,b,c,e,g,q){for(var f=0,h=d.Trig.calculatePolygonInternalAngle(b)/2,k="",m=0;m<b;m+=1){var l=this._calculatePolygonPoint(a,f,c);f+=h;k+=l.x+","+l.y+" ";l=this._calculatePolygonPoint(a,f,e);f+=h;k+=l.x+","+l.y+" "}g||(g={});g.points=k;b=this._addChild("polygon",g,q);this._options.auto_resize&&this._updateExtrema(this._extremaFromCenterPointAndRadius(a,c));return b};b.prototype.addText=function(a,b,c,e,g){e||(e={});e.x=b.x;e.y=b.y;b=this._addChild("text",
e,g);b.innerHTML=a;if(c){var f=this.measureElement(b);a=f.w*c.x;c=f.h*c.y-f.h;b.setAttribute("x",a.toString());b.setAttribute("y",c.toString());f.x=a;f.y=c}this._options.auto_resize&&(f||this.measureElement(b),this._updateExtrema(f));d.addClass(b,"unselectable");return b};b.prototype.addFlowableText=function(a,b,c,d){return null};b.prototype.addGroup=function(a,b){return this._addChild("g",a,b)};b.prototype.addGradient=function(a,b,c){var f="gradient"+this.__gradients.length;var h=d.createSVGElem(e[a]+
"Gradient",{id:f});for(var g=0;g<b.length;g++){var k=b[g],n=d.createSVGElem("stop");n.style.stopColor=k.color;n.style.stopOpacity=k.opacity.toString();n.setAttribute("offset",k.offset);h.appendChild(n)}this._definitionsElement.appendChild(h);this.__gradients.push(h);c&&(b="gradient"+this.__gradients.length,a=d.createSVGElem(a+"Gradient",{id:b}),a.setAttribute("x1",c.start.x.toString()),a.setAttribute("x2",c.end.x.toString()),a.setAttribute("y1",c.start.y.toString()),a.setAttribute("y2",c.end.y.toString()),
a.setAttribute("xlink:href","#"+f),this._definitionsElement.appendChild(a),this.__gradients.push(a),f=b);return f};b.prototype.addPattern=function(){};b.prototype.addStipplePattern=function(){};b.prototype.addShape=function(a,b,c,d){b||(b=1);switch(a){case g.checkmark:return this._addCheckShape(b,c,d);case g.ex:return this._addExShape(b,c,d);case g.plus:return this._addPlusShape(b,c,d)}};b.prototype._addCheckShape=function(a,b,c){a=this._convertPointsToPathPoints([{x:-.15,y:2.95},{x:1,y:4},{x:1.25,
y:4},{x:3,y:.25},{x:2.4,y:0},{x:1,y:3},{x:.3,y:2.3}],.25*a);return this.addPath(a,b,c)};b.prototype._addExShape=function(a,b,c){a=this._convertPointsToPathPoints([{x:.25,y:.6},{x:1,y:0},{x:2,y:1.1},{x:3,y:0},{x:3.75,y:.6},{x:2.66,y:1.75},{x:3.75,y:2.9},{x:3,y:3.5},{x:2,y:2.5},{x:1,y:3.5},{x:.25,y:2.9},{x:1.33,y:1.75}],1/3.75*a);return this.addPath(a,b,c)};b.prototype._addPlusShape=function(a,b,c){a=this._convertPointsToPathPoints([{x:2,y:2},{x:2,y:0},{x:3,y:0},{x:3,y:2},{x:5,y:2},{x:5,y:3},{x:3,y:3},
{x:3,y:5},{x:2,y:5},{x:2,y:3},{x:0,y:3},{x:0,y:2}],.2*a);return this.addPath(a,b,c)};b.prototype._convertPointsToPathPoints=function(a,b){b||(b=1);for(var c=[],f=0;f<a.length;f++){var d=a[f];d.x*=b;d.y*=b;c.push({point:d})}return c};b.prototype.adjustStyle=function(){};b.prototype.rotateElement=function(a,b,c){c||(c=this.measureElement(a),c={x:c.x+c.w/2,y:c.y+c.h/2});a.setAttribute("transform","rotate("+b+", "+c.x+", "+c.y+")");return a};b.prototype.animateElement=function(){};b.prototype.measureElement=
function(a){if(!this.base.parentNode){document.body.appendChild(this.base);var b=!0}a=a.getBBox();b&&document.body.removeChild(this.base);return{x:a.x,y:a.y,w:a.width,h:a.height}};b.prototype._checkBasicRectForBadData=function(a){var b=!1;0===a.x||a.x||(b=!0);0===a.y||a.y||(b=!0);0===a.w||a.w||(b=!0);0===a.h||a.h||(b=!0);0>a.w&&(b=!0);0>a.h&&(b=!0);if(b)throw Error("invalid basic rectangle values");};b.prototype._basicRectToExtrema=function(a){return{min:{x:a.x,y:a.y},max:{x:a.x+a.w,y:a.y+a.h}}};
b.prototype._extremaFromCenterPointAndRadius=function(a,b){return{max:{x:a.x+b,y:a.y+b},min:{x:a.x-b,y:a.y-b}}};b.prototype._calculatePolygonPoint=function(a,b,c){return{x:a.x+d.roundToPlace(Math.sin(b)*c,10),y:a.y+d.roundToPlace(-1*Math.cos(b)*c,10)}};b.prototype._arcToExtrema=function(a,b,c,d,e,g){a={max:{x:Math.max(a.x,b.x),y:Math.max(a.y,b.y)},min:{x:Math.min(a.x,b.x),y:Math.min(a.y,b.y)}};0>e&&0<g&&(b=c.y-d,b>a.max.y&&(a.max.y=b));90>e&&90<g&&(b=c.x+d,b>a.max.x&&(a.max.x=b));180>e&&180<g&&(b=
c.y+d,b<a.min.y&&(a.min.y=b));270>e&&270<g&&(c=c.x-d,c<a.min.x&&(a.min.x=c));return a};return b}(d.Drawable);d.SVGDrawable=c})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a){var b=e.call(this,{cls:"tutorial"})||this;b._initializeVariables();b._reconcileOptions(a);b._createElements();return b}__extends(c,e);c.prototype._initializeVariables=function(){this._steps=[];this._currentStep=-1};c.prototype._reconcileOptions=function(a){d.reconcileOptions(a,{loopAround:!0,useStandardStyles:!0,inlineMargin:5})};c.prototype._createElements=function(){};c.prototype._createStepContainer=function(){this.__stepContainer=d.createSimpleElement("",
"tutorialSteps");this.base.appendChild(this.__stepContainer)};c.prototype.addStep=function(a,b){return null};c.prototype._addStepToCollection=function(a){var b=this._steps.length;this._steps[b]=a;return b};c.prototype.showStep=function(a){var b;-1!==this._currentStep&&(b=this._steps[this._currentStep]);b&&(b.erase(),this._currentStep=-1);if(b=this._steps[a])b.draw(this.base),this._currentStep=a};c.prototype.nextStep=function(){var a=this._currentStep;a+=1;this.__options.loopAround&&(a%=this._steps.length);
this.showStep(a)};c.prototype.previousStep=function(){var a=this._currentStep;--a;0>a&&this.__options.loopAround&&(a=this._steps.length-1);this.showStep(a)};c.prototype.show=function(){-1===this._currentStep&&this.showStep(0);this.draw(document.body);d.addClass(this._elems.base,"visible")};c.prototype.hide=function(){if(this.base.parentNode&&(d.removeClass(this._elems.base,"visible"),this.onTutorialHidden))this.onTutorialHidden()};return c}(d.Drawable);d.Tutorial=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a,b){var c=e.call(this,{cls:"tutorialStep"})||this;c.__defaultDetailsClass="details";c.__title=b;c.__parent=a;c.__details=[];c._createElements();return c}__extends(c,e);c.prototype._createElements=function(){};c.prototype.__createTitle=function(){var a=d.createSimpleElement("","title",this.__title);this.base.appendChild(a)};c.prototype.__createDetailContainer=function(){this.__detailContainer=d.createSimpleElement("","details");this.base.appendChild(this.__detailContainer)};
c.prototype.__createDetailElement=function(a){a&&(a.cls=a.cls||this.__defaultDetailsClass,a=d.createSimpleElement("",a.cls,a.details),this.__detailContainer.appendChild(a))};c.prototype.addHilitedElement=function(a){};c.prototype.addDetails=function(a,b){a={details:a,cls:b};this.__details.push(a);this.__createDetailElement(a)};return c}(d.Drawable);d.TutorialStep=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(){return null!==e&&e.apply(this,arguments)||this}__extends(c,e);c.prototype._createElements=function(){this._createOverlay();this._createStepContainer();this._createCloseButton();this._createNavigationalElements()};c.prototype._createOverlay=function(){var a=d.createSimpleElement("","overlay");this.base.appendChild(a)};c.prototype._createCloseButton=function(){var a=this,b=d.createSimpleElement("","close btn","CLOSE");this.base.appendChild(b);b.addEventListener("click",
function(){a.hide()})};c.prototype._createNavigationalElements=function(){var a=d.createSimpleElement("","tutorialNavButtons");this.__createPreviousBtn(a);this.__navStepContainer=d.createSimpleElement("","tutorialStepsNav");this.__createNextBtn(a)};c.prototype.__createPreviousBtn=function(a){var b=this,c=d.createSimpleElement("","prev btn","PREV");a.appendChild(c);c.addEventListener("click",function(){b.previousStep()})};c.prototype.__createNextBtn=function(a){var b=this,c=d.createSimpleElement("",
"next btn","NEXT");a.appendChild(c);c.addEventListener("click",function(){b.nextStep()})};c.prototype.addStep=function(a,b){a=new d.TutorialScreen(this,a);a.addDetails(b);b=this._addStepToCollection(a);this.__addStepNavigator(b);return a};c.prototype.__addStepNavigator=function(a){var b=this,c=d.createSimpleElement("","navStep");this.__navStepContainer.appendChild(c);c.addEventListener("click",function(){b.showStep(a)})};c._uncoloredStyles={".tutorial":{top:"0",left:"0",position:"fixed",width:"100%",
height:"100%",opacity:"0",transition:"opacity 0.2s ease-in-out",fontFamily:"Segoe UI, Calibri, Helvetica",userSelect:"none",pointerEvents:"none"},".tutorial.visible":{opacity:"1",pointerEvents:"auto"},".tutorial .overlay":{backgroundColor:"rgba(0,0,0,0.8)",position:"absolute",left:"0",top:"0"},".tutorial .content .title":{color:"#FFF",fontSize:"2em"}};return c}(d.Tutorial);d.FullScreenTutorial=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(){return null!==e&&e.apply(this,arguments)||this}__extends(c,e);c.prototype._createElements=function(){this._createStepContainer()};c.prototype.addStep=function(a,b){a=new d.TutorialTip(this,a);a.addDetails(b);this._addStepToCollection(a);return a};c._uncoloredStyles={".inlineHelp":{position:"absolute",backgroundColor:"#eee",padding:"10px",boxShadow:"1px 1px 13px 5px rgba(0,0,0,.1)",borderRadius:"3px",maxWidth:"35%"},".inlineHelp .title":{fontSize:"1.1em",
fontWeight:"bold",textTransform:"uppercase",marginBottom:"5px"},".tutorial .inlineHelp .content":{display:"block"},".tutorialHilite":{border:"5px #333 dotted",boxShadow:"1px 1px 8px 4px rgba(0,0,0, 0.2)"},".tutorialHilite:before":{content:'""',position:"absolute",width:"140%",height:"140%",top:"-20%",left:"-20%",zIndex:"-1",backgroundColor:"rgba(0,0,0,.1)",boxShadow:"1px 1px 25px 10px rgba(0,0,0,.1)"},".inlineBtns":{display:"flex",justifyContent:"space-between",marginTop:"10px"},".inlineBtn":{cursor:"pointer",
transition:"all .1s ease-in-out"},".inlineBtn:hover":{transform:"scale(1.1)"},".close.inlineBtn":{position:"absolute",left:"calc(100% - 18px)",top:"-5px",borderRadius:"15px",padding:"2px 7px"}};return c}(d.Tutorial);d.HelpTipTutorial=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(){var a=null!==e&&e.apply(this,arguments)||this;a.__defaultDetailsClass="inlineDetails";return a}__extends(c,e);c.prototype._createElements=function(){this.__createTitle();this.__createDetailContainer();this.__createButtonContainer();this.__createCloseButton()};c.prototype.__createCloseButton=function(){var a=d.createSimpleElement("","close btn","X");this.base.appendChild(a)};c.prototype.__createButtonContainer=function(){var a=d.createSimpleElement("","buttonContainer");
this.base.appendChild(a);this.__createPreviousButton(a);this.__createNextButton(a)};c.prototype.__createNextButton=function(a){var b=this,c=d.createSimpleElement("","next btn","NEXT");a.appendChild(c);c.addEventListener("click",function(){b.__parent.nextStep()})};c.prototype.__createPreviousButton=function(a){var b=this,c=d.createSimpleElement("","prev btn","PREVIOUS");a.appendChild(c);c.addEventListener("click",function(){b.__parent.previousStep()})};c.prototype.addHilitedElement=function(a){this.__hilitedElement=
a};c.prototype.__findAppropriatePoint=function(){var a=this.__hilitedElement.getBoundingClientRect();var b=a.height;a=window.innerWidth-(a.width+2*this.__options.inlineMargin);b=window.innerHeight-b;var c={x:null,y:null};void 0!==(void 0).x&&(c.x=Math.min((void 0).x,a));void 0!==(void 0).y&&(c.y=Math.min((void 0).y,b));if(!(void 0).srcElem)return c;(void 0).srcElem.getBoundingClientRect();null===c.x&&(c.x=(void 0).x);null===c.y&&(c.y=(void 0).y);return c};return c}(d.TutorialStep);d.TutorialTip=e})(KIP||
(KIP={}));(function(d){var e=function(d){function c(){var a=null!==d&&d.apply(this,arguments)||this;a.__defaultDetailsClass="fullscreenDetails";return a}__extends(c,d);c.prototype._createElements=function(){this.__createTitle();this.__createDetailContainer()};c.prototype.addHilitedElement=function(a,b){};return c}(d.TutorialStep);d.TutorialScreen=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a){var b=e.call(this,{id:"project",cls:"project"})||this;b._projectLines=new d.Collection;var c=b.__generateDefaultOptions();d.reconcileOptions(a,c);return b}__extends(c,e);c.prototype._createElements=function(){};c.prototype.addProjectLine=function(a,b,c,d){this._projectLines.addElement(a,void 0)};c.prototype.__addSegmentElements=function(a){};c.prototype.getProjectLine=function(a){var b;a=this._projectLines.getElement(a);return a?b=a.value:b};c.prototype.addProjectMilestone=
function(a,b,c,d,e,g){};c.prototype.__generateDefaultOptions=function(){return{showTitles:!0,showHoverBubbles:!1}};return c}(d.Drawable);d.SVGProject=e})(KIP||(KIP={}));
(function(d){(function(d){d[d.OK=1]="OK";d[d.Accept=2]="Accept";d[d.Cancel=3]="Cancel";d[d.Next=4]="Next";d[d.Previous=5]="Previous";d[d.Custom=99]="Custom"})(d.FormStandardButtons||(d.FormStandardButtons={}));(function(d){d[d.Text=0]="Text";d[d.Date=1]="Date";d[d.Numeric=2]="Numeric";d[d.Range=3]="Range";d[d.Color=4]="Color";d[d.TextArea=5]="TextArea";d[d.Checkbox=6]="Checkbox";d[d.Radio=7]="Radio";d[d.Select=8]="Select"})(d.FieldTypeEnum||(d.FieldTypeEnum={}))})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a){a?a.cls=(a.cls||"")+" popup":a={cls:"popup"};var b=e.call(this,a)||this;a.themeColor?b.setThemeColor(0,a.themeColor):b.setThemeColor(0,"#06F",!0);return b}__extends(c,e);c.prototype._createElements=function(){this._createOverlay();this._createFrame();this._createTitle();this._createCloseButton();this._createContentElement();this._createButtonContainer()};c.prototype._createOverlay=function(){var a=this;this._elems.overlay=d.createSimpleElement("","overlay");
this._elems.overlay.addEventListener("click",function(){a.erase()});this._elems.base.appendChild(this._elems.overlay)};c.prototype._createFrame=function(){this._elems.frame=d.createSimpleElement("","frame");this._elems.base.appendChild(this._elems.frame)};c.prototype._createTitle=function(){this._elems.title=d.createElement({cls:"popupTitle",parent:this._elems.frame})};c.prototype._createCloseButton=function(){var a=this;this._elems.closeBtn=d.createSimpleElement("","closeBtn","",null,[{content:"x",
cls:"x"}]);this._elems.closeBtn.addEventListener("click",function(){a.erase()});this._elems.frame.appendChild(this._elems.closeBtn)};c.prototype._createContentElement=function(){this._elems.content=d.createSimpleElement("","content");this._elems.frame.appendChild(this._elems.content)};c.prototype._createButtonContainer=function(){this._elems.buttonContainer=d.createElement({cls:"buttonContainer",parent:this._elems.frame})};c.prototype.setTitle=function(a){(this._elems.title.innerHTML=a)?d.addClass(this._elems.title,
"hasContent"):d.removeClass(this._elems.title,"hasContent")};c.prototype.addContent=function(a,b,c){(a=d.isString(a)?d.createSimpleElement(a,b,c):d.isDrawable(a)?a.base:a instanceof HTMLElement?a:d.createElement(a))&&this._elems.content.appendChild(a)};c.prototype.clearContent=function(){this._elems.content.innerHTML=""};c.prototype.addButton=function(a,b){d.createElement({cls:"popupButton",parent:this._elems.buttonContainer,content:a}).addEventListener("click",function(){b()})};c._uncoloredStyles=
{".overlay":{backgroundColor:"rgba(0,0,0,.6)",position:"absolute",left:"0",top:"0",width:"100%",height:"100%"},".popup":{display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Segoe UI, Calibri, OpenSans, Helvetica",position:"fixed",width:"100%",height:"100%",left:"0",top:"0"},".frame":{position:"absolute",backgroundColor:"#FFF",borderRadius:"3px",boxShadow:"1px 1px 5px 2px rgba(0,0,0,.2)",display:"block",borderTop:"10px solid <0>",padding:"10px"},".popup .popupTitle":{fontSize:"1.3em",
fontWeight:"bold"},".popup .popupTitle.hasContent":{marginBottom:"5px"},".popup .content":{fontSize:"0.9em"},".popup .buttonContainer":{display:"flex",marginTop:"8px",justifyContent:"flex-end"},".popup .buttonContainer .popupButton":{padding:"2px 10px",backgroundColor:"<0>",color:"#FFF",cursor:"pointer",marginLeft:"15px",borderRadius:"2px",transition:"all ease-in-out .1s"},".popup .buttonContainer .popupButton:hover":{transform:"scale(1.1)"},".popup .closeBtn":{width:"16px",height:"16px",borderRadius:"8px",
cursor:"pointer",position:"absolute",left:"calc(100% - 7px)",top:"-15px",backgroundColor:"#DDD",boxShadow:"1px 1px 5px 2px rgba(0,0,0,.1)",color:"#333",display:"flex",justifyContent:"center",alignItems:"center",transition:"all ease-in-out .1s"},".popup .closeBtn .x":{paddingBottom:"2px"},".popup .closeBtn:hover":{transform:"scale(1.1)"}};return c}(d.Drawable);d.Popup=e})(KIP||(KIP={}));
(function(d){var e;(function(c){c[c.YES=1]="YES";c[c.NO=0]="NO"})(e=d.YesNoEnum||(d.YesNoEnum={}));var g=function(c){function a(a,f,d){d=c.call(this,d)||this;d._onSelection=f;d.addContent("","",a);d._createButtons();return d}__extends(a,c);a.prototype._createButtons=function(){this._createButton("Yes",e.YES);this._createButton("No",e.NO)};a.prototype._createButton=function(a,c){var b=this;this.addButton(a,function(){b._onSelection&&(b._onSelection(c),b.erase())})};return a}(d.Popup);d.YesNoPopup=
g;d.showYesNoForm=function(c,a){(new g(c,a)).draw(document.body)}})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a){a?a.cls+=" login":a={cls:"login popup"};return e.call(this,a)||this}__extends(c,e);Object.defineProperty(c.prototype,"loginCallback",{set:function(a){this._loginCallback=a},enumerable:!0,configurable:!0});c.prototype._getUncoloredStyles=function(){return this._mergeThemes(c._uncoloredStyles,d.Popup._uncoloredStyles)};c.prototype._createElements=function(){var a=this;e.prototype._createElements.call(this);var b=d.createLabeledElement({type:"input",attr:{type:"text"}},
{content:"Username"});this._elems.username=b.data;this._elems.content.appendChild(b.wrapper);b=d.createLabeledElement({type:"input",attr:{type:"password"}},{content:"Password"});this._elems.password=b.data;this._elems.content.appendChild(b.wrapper);this.addButton("Login",function(){a.erase();a._loginCallback&&a._loginCallback(a._elems.username.value,a._elems.password.value)});this.addButton("Cancel",function(){a.erase()})};c.prototype.erase=function(){e.prototype.erase.call(this);this._elems.username.value=
"";this._elems.password.value=""};c._uncoloredStyles={".popup.login .wrapper + .wrapper":{marginTop:"10px"}};return c}(d.Popup);d.LoginPopup=e})(KIP||(KIP={}));(function(d){var e=function(d){function c(a,b,c){var f=d.call(this,c)||this;f.setTitle(b||"Uh-oh...that wasn't supposed to happen");f.addContent("","",a);f.addButton("Okay",function(){f.erase()});return f}__extends(c,d);return c}(d.Popup);d.ErrorPopup=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a,b,c,h){var f=e.call(this,h)||this;d.addClass(f._elems.base,"toast");f._showFor=c||2E3;b&&f.setTitle(b);f.addContent("","",a);f.addButton("Dismiss",function(){f.erase()});return f}__extends(c,e);c.prototype._getUncoloredStyles=function(){return this._mergeThemes(d.Popup._uncoloredStyles,c._uncoloredStyles)};c.prototype.draw=function(a,b){var c=this;e.prototype.draw.call(this,a,b);d.transition(this._elems.frame,{top:"100%"},{top:"calc(100% - <height>)"},300).then(function(){c._elems.frame.style.top=
c._elems.frame.offsetTop+"px"});window.setTimeout(function(){c.erase()},this._showFor)};c.prototype.erase=function(){var a=this;delete this._elems.frame.style.top;d.transition(this._elems.frame,{top:"calc(100% - <height>)",opacity:"1"},{top:"100%",opacity:"0"},300).then(function(){e.prototype.erase.call(a)})};c._uncoloredStyles={".toast .overlay":{display:"none"},".toast .closeBtn":{display:"none"},".toast .frame":{width:"15%",height:"75px",boxSizing:"border-box",left:"85%"}};return c}(d.Popup);d.ToastPopup=
e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(){var a=e.call(this)||this;a._addClassName("UnitTestUI");return a}__extends(c,e);c.prototype._createElements=function(){this._elems.base=d.createElement({cls:"tests"});this._elems.testContainer=d.createElement({cls:"testContainer",parent:this._elems.base});this._elems.groups=[]};c.prototype.test=function(a,b,c,d){var f=this.testEquality(b,c);b=this._buildValueString(f,b,c);d=d||"";this._constructTestUI(a,f,b,d);this._logTest(a,f,b,d)};c.prototype.assert=function(a,
b,c,d){c=b?c:d;this._constructTestUI(a,b,c);this._logTest(a,b,c)};c.prototype.startGroup=function(a){console.log("\n=== "+a+" ===");var b=d.createElement({cls:"group",parent:this._elems.testContainer});this._elems.groups.push(b);d.createElement({cls:"groupName",parent:b,content:a})};c.prototype.testFunction=function(a,b,c){d.createElement({cls:"functionTitle",content:b,parent:this._elems.groups[this._elems.groups.length-1]||this._elems.testContainer});for(b=0;b<c.length;b+=1){var f=c[b],e=a.apply(window,
f.params),g=this.testEquality(e,f.result);e=this._buildValueString(g,e,f.result);this._constructTestUI(f.details,g,e);this._logTest(f.details,g,e)}};c.prototype.visualTest=function(a,b){var c=this._elems.groups[this._elems.groups.length-1]||this._elems.testContainer;d.createElement({cls:"functionTitle",content:a,parent:c});a=function(a){var f=b[a];d.createElement({cls:"visualTestBtn",parent:c,children:[{content:f.label,cls:"innerBtn"}]}).addEventListener("click",function(){f.callback()})};for(var e=
0;e<b.length;e+=1)a(e)};c.prototype.testEquality=function(a,b){return a.equals?a.equals(b):a===b};c.prototype._buildValueString=function(a,b,c){return a?d.format("'{0}' = '{1}'",b,c):d.format("'{0}' != '{1}'",b,c)};c.prototype._buildTestString=function(a,b,c,d){var f="\t\t"+this._passToString(b).toUpperCase();return f=f+(": "+a)+(b?"":" ["+c+"]")+(d?" - "+d:"")};c.prototype._passToString=function(a){return a?"pass":"fail"};c.prototype._constructTestUI=function(a,b,c,e){var f=this._passToString(b),
h=d.createElement({cls:"test",parent:this._elems.groups[this._elems.groups.length-1],attr:{title:c}});d.createElement({cls:f,content:f.toUpperCase(),parent:h});d.createElement({cls:"name",content:a,parent:h});b||(d.createElement({cls:"err",content:c,parent:h}),d.createElement({cls:"message",content:e,parent:h}))};c.prototype._logTest=function(a,b,c,d){a=this._buildTestString(a,b,c,d);console.log(a)};c._uncoloredStyles={".hidden":{display:"none"},".group":{marginBottom:"10px",display:"#666",borderCollapse:"collapse",
width:"20%"},".groupName":{fontSize:"1.6em",color:"#666"},".functionTitle":{fontSize:"1.3em",color:"#888",marginLeft:"5px"},".tests":{marginLeft:"50px",fontFamily:"Segoe UI, Calibri, Helvetica"},".tests .testContainer":{display:"flex",flexWrap:"wrap"},".test":{display:"table-row"},".test > div":{border:"solid transparent",borderWidth:"10px",borderWidthLeft:"20px",marginRight:"10px",display:"table-cell"},".test .fail":{color:"rgb(190,50,30)",fontWeight:"bold"},".test .pass":{color:"rgb(50,190,30)",
fontWeight:"bold",marginRight:"10px",display:"table-cell"},".test .name":{color:"#333",marginRight:"10px",display:"table-cell"},".test .err":{textStyle:"italic",color:"#666",fontSize:"0.8em"},".test .message":{color:"#888",marginRight:"10px",display:"table-cell"},".visualTestBtn":{color:"#FFF",padding:"2px 10px",borderRadius:"3px",cursor:"pointer",width:"auto",marginBottom:"8px"},".innerBtn":{backgroundColor:"#06C",display:"inline-block",padding:"2px 10px"}};return c}(d.Drawable);d.UnitTestUI=e})(KIP||
(KIP={}));
(function(d){var e=function(c){function a(){var a=c.call(this)||this;a._availableOptions=new d.Collection;return a}__extends(a,c);a.prototype._createElements=function(){var a=this;this._elems={};this._elems.base=d.createElement({cls:"dynamicSelect"});this._elems.input=d.createElement({type:"input"});this._elems.input.addEventListener("change",function(b){a._onChange(b)});this._elems.input.addEventListener("keyup",function(b){a._onKeyUp(b)})};a.prototype._expandDrawer=function(){d.transition(this._elems.drawer,{height:"0"},
{height:"<height>"},500)};a.prototype._collapseDrawer=function(){d.transition(this._elems.drawer,{height:"<height>"},{height:"0"},500)};a.prototype.addOption=function(a){a=new g(a);this._availableOptions.addElement(a.id,a)};a.prototype.addOptions=function(a){for(var b,c=0;c<a.length;c++)b=a[c],this.addOption(b)};a.prototype._onChange=function(a){a=this._elems.input.value;this._updateFiltering(a);this._isQuerying?this._nextQuery=a:this._query(a)};a.prototype._onKeyUp=function(a){};a.prototype._onClick=
function(a){};a.prototype._updateFiltering=function(a){var b=a.split(" ");this._availableOptions.map(function(a){a.tryFilter(b)})};a.prototype._query=function(a){var b=this;this._isQuerying?this._nextQuery=a:this._nextQuery?(this._onQuery(this._nextQuery).then(function(){b._query()}),this._nextQuery=a):a&&this._onQuery(a)};a._uncoloredStyles={};return a}(d.Drawable);d.DynamicSelect=e;var g=function(c){function a(a){var b=c.call(this)||this;b._id=a.id;b._display=a.display;b._createElements();return b}
__extends(a,c);Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"display",{get:function(){return this._display},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isFiltered",{get:function(){return this._isFiltered},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isSelected",{get:function(){return this._isSelected},enumerable:!0,configurable:!0});a.prototype._shouldSkipCreateElements=
function(){return!0};a.prototype._createElements=function(){this._elems={};this._elems.base=d.createElement({cls:"dynamicOption"});this._elems.text=d.createElement({content:this._display,cls:"optText",parent:this._elems.base})};a.prototype.select=function(){};a.prototype._filter=function(){this._isFiltered||(this._isFiltered=!0,d.transition(this._elems.base,{height:"<height>"},{height:"0"},200))};a.prototype._unfilter=function(){this._isFiltered&&(this._isFiltered=!1,d.transition(this._elems.base,
{height:"0"},{height:"<height>"},200))};a.prototype.tryFilter=function(a){var b=this;return new d.KipPromise(function(){window.setTimeout(function(){for(var c,d=!1,f=0;f<a.length;f++)if(c=a[f],-1===b._display.indexOf(c)&&-1===b._id.indexOf(c)){d=!0;break}d?b._filter():b._unfilter()},0)})};a._uncoloredStyles={};return a}(d.Drawable);d.DynamicOption=g})(KIP||(KIP={}));
(function(d){var e;(function(c){c[c.FILL_COLOR=0]="FILL_COLOR";c[c.STROKE_COLOR=1]="STROKE_COLOR";c[c.FONT_FAMILY=2]="FONT_FAMILY";c[c.FONT_VARIANT=3]="FONT_VARIANT";c[c.FONT_SIZE=4]="FONT_SIZE";c[c.STROKE_SIZE=5]="STROKE_SIZE";c[c.TEXT_ALIGN=6]="TEXT_ALIGN";c[c.FONT=7]="FONT"})(e=d.StyleChangeEnum||(d.StyleChangeEnum={}));var g=function(){function c(a){this._listeners=[];a?(this._fillColor=a.fillColor,this._strokeColor=a.strokeColor,this._font=a.font,this._fontFamily=a.fontFamily,this._fontSize=
a.fontSize,this._fontVariant=a.fontVariant,this._strokeSize=a.strokeSize,this._textAlign=a.textAlign):(this._strokeColor=this._fillColor="#000",this._strokeSize=1,this._fontFamily="Helvetica",this._fontSize=40,this._textAlign="left")}Object.defineProperty(c.prototype,"fillColor",{get:function(){return this._fillColor},set:function(a){this._fillColor=a;this._onChange(e.FILL_COLOR)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"strokeColor",{get:function(){return this._strokeColor},
set:function(a){this._strokeColor=a;this._onChange(e.STROKE_COLOR)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(a){this._fontFamily=a;this._onChange(e.FONT_FAMILY)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(a){this._fontVariant=a;this._onChange(e.FONT_VARIANT)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"fontSize",{get:function(){return this._fontSize},set:function(a){this._fontSize=a;this._onChange(e.FONT_SIZE)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"strokeSize",{get:function(){return this._strokeSize},set:function(a){this._strokeSize=a;this._onChange(e.STROKE_SIZE)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"textAlign",{get:function(){return this._textAlign},set:function(a){this._textAlign=a;this._onChange(e.TEXT_ALIGN)},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"font",{get:function(){return this._font?this._font:(this._fontVariant?this._fontVariant+" ":"")+(this._fontSize?this._fontSize+"px ":"")+this._fontFamily},set:function(a){this._font=a;this._onChange(e.FONT)},enumerable:!0,configurable:!0});c.prototype.addStyleChangeListener=function(a,b){this._listeners[a]||(this._listeners[a]=[]);this._listeners[a].push(b)};c.prototype._onChange=function(a){if(this._listeners[a])for(var b=0,c=this._listeners[a];b<c.length;b++)a=
c[b],a()};c.prototype.setStyle=function(a){this._saveOffOldStyle(a);this._applyStyleToContext(a,this)};c.prototype.restoreStyle=function(a){this._applyStyleToContext(a,this._oldStyle)};c.prototype._saveOffOldStyle=function(a){this._oldStyle=new c;this._oldStyle.fillColor=a.fillStyle;this._oldStyle.strokeColor=a.strokeStyle;this._oldStyle.font=a.font;this._oldStyle.strokeSize=a.lineWidth;this._oldStyle.textAlign=a.textAlign};c.prototype._applyStyleToContext=function(a,b){a.fillStyle=b.fillColor;a.strokeStyle=
b.strokeColor;a.textAlign=b.textAlign;a.font=b.font;a.lineWidth=b.strokeSize};return c}();d.CanvasElementStyle=g})(KIP||(KIP={}));
(function(d){(function(c){c[c.Rectangle=0]="Rectangle";c[c.Text=1]="Text";c[c.Circle=2]="Circle";c[c.Path=3]="Path";c[c.Group=4]="Group"})(d.ElementType||(d.ElementType={}));var e;(function(c){c[c.CLICK=0]="CLICK";c[c.HOVER=1]="HOVER";c[c.LEAVE=2]="LEAVE";c[c.R_CLICK=3]="R_CLICK";c[c.DBL_CLICK=4]="DBL_CLICK";c[c.KEY_PRESS=5]="KEY_PRESS";c[c.FOCUS=6]="FOCUS";c[c.BLUR=7]="BLUR"})(e=d.EventTypeEnum||(d.EventTypeEnum={}));var g=function(){function c(a,b){this._layer=1;this._id=a;this._isEffect=b;this._eventFunctions=
[];this._style=new d.CanvasElementStyle}Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"canvas",{set:function(a){this._setCanvas(a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"parent",{set:function(a){this._parent=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"style",{get:function(){return this._style},set:function(a){this._style=a},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"layer",{get:function(){return this._layer},set:function(a){this._layer=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isOffScreen",{get:function(){return this._isOffScreen},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"dimensions",{get:function(){return this._dimensions},set:function(a){this._setDimensions(a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"displayDimensions",{get:function(){return this._displayDimensions},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isHoverTarget",{get:function(){return this._isHoverTarget},set:function(a){this._isHoverTarget=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isHidden",{get:function(){return this._isHidden},enumerable:!0,configurable:!0});c.prototype._initializeRects=function(){this._displayDimensions={x:this._dimensions.x,y:this._dimensions.y,w:this._dimensions.w,h:this._dimensions.h}};c.prototype._applyStyle=function(a){this._style.setStyle(a)};
c.prototype._restoreStyle=function(a){this._style.restoreStyle(a)};c.prototype.transform=function(a){if(this._parent){var b=this._cloneForEffect(this.id+"|e");b._isEffect=!0;b._layer=this._layer;b.style=this._cloneStyle();a.color&&(b._style.fillColor=a.color);a.scale&&b._scale(a.scale);this._parent.addElement(b)}};c.prototype._cloneStyle=function(){return new d.CanvasElementStyle(this._style)};c.prototype._scale=function(a){if(this._isEffect){var b=a*this._dimensions.w;a*=this._dimensions.h;this._dimensions=
{x:this._dimensions.x-(b-this._dimensions.w)/2,y:this._dimensions.y-(a-this._dimensions.h)/2,w:b,h:a}}};c.prototype.updateDimensions=function(a){this._displayDimensions=this._canvas.convertAbsoluteRectToRelativeRect(this._dimensions);this._setIsOffScreen(a)};c.prototype.adjustDimensions=function(a){this._isEffect||(this._dimensions.x+=a.x,this._dimensions.y+=a.y)};c.prototype.draw=function(){if(!this._isOffScreen&&this._canvas&&!this._isHidden){var a=this._isEffect?this._canvas.effectContext:this._canvas.context;
this._applyStyle(a);this._onDraw(a);this._restoreStyle(a);this._isDrawn=!0}};c.prototype._setIsOffScreen=function(a){this._isOffScreen=!d.Trig.doBasicRectsOverlap(a,this._dimensions)};c.prototype._setDimensions=function(a){this._dimensions=a;this._canvas&&(this._canvas.needsRedraw=!0)};c.prototype._setCanvas=function(a){this._canvas=a};c.prototype.addEventListener=function(a,b){var c=this._eventFunctions[a];c||(c=[],this._eventFunctions[a]=c);c.push(b)};c.prototype.click=function(a,b){this.handleEvent(e.CLICK,
a,b)};c.prototype.doubleClick=function(a,b){this.handleEvent(e.DBL_CLICK,a,b)};c.prototype.rightClick=function(a,b){this.handleEvent(e.R_CLICK,a,b)};c.prototype.hover=function(a,b){this.handleEvent(e.HOVER,a,b)};c.prototype.leave=function(a,b){this.handleEvent(e.LEAVE,a,b)};c.prototype.keyPress=function(a,b){this.handleEvent(e.KEY_PRESS,a,b)};c.prototype.focus=function(a,b){this.handleEvent(e.FOCUS,a,b)};c.prototype.blur=function(a,b){this.handleEvent(e.BLUR,a,b)};c.prototype.handleEvent=function(a,
b,c){a===e.BLUR||a===e.LEAVE?(this._parent&&this._parent.removeElement(this.id+"|e"),this._isHoverTarget=!1):a===e.HOVER&&(this._isHoverTarget=!0);if(a=this._eventFunctions[a]){for(var d,f=0;f<a.length;f++)d=a[f],d(b,c);this._canvas||(this._canvas.needsRedraw=!0)}};c.prototype.swapVisibility=function(){this._isHidden?this.show():this.hide()};c.prototype.hide=function(){this._isHidden||(this._isHidden=!0,this._canvas.needsRedraw=!0)};c.prototype.show=function(){this._isHidden&&(this._isHidden=!1,this._canvas.needsRedraw=
!0)};c.prototype._debugDimensions=function(){console.log("CANVAS ELEM: "+this._id);console.log("x: "+Math.round(this._displayDimensions.x)+" (from "+this._dimensions.x+")");console.log("y: "+Math.round(this._displayDimensions.y)+" (from "+this._dimensions.y+")");console.log("w: "+Math.round(this._displayDimensions.w)+" (from "+this._dimensions.w+")");console.log("h: "+Math.round(this._displayDimensions.h)+" (from "+this._dimensions.h+")");console.log("\nparent: "+(this._parent?this._parent.id:"none"));
console.log("===\n");this._canvas&&this._canvas.debugRelativeDimensions();console.log("offscreen? "+this._isOffScreen);console.log("--------------------\n\n")};c.prototype.debugDimensions=function(){this._debugDimensions()};return c}();d.CanvasElement=g})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a,b){a=e.call(this,a)||this;a._type=d.ElementType.Rectangle;a._borderRadius=0;a._dimensions=b;a._initializeRects();return a}__extends(c,e);Object.defineProperty(c.prototype,"borderRadius",{set:function(a){this._borderRadius=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"type",{get:function(){return d.ElementType.Rectangle},enumerable:!0,configurable:!0});c.prototype._onDraw=function(a){0===this._borderRadius?this._unroundedRect(a):this._roundedRect(a)};
c.prototype._unroundedRect=function(a){a.fillRect(this._displayDimensions.x,this._displayDimensions.y,this._displayDimensions.w,this._displayDimensions.h)};c.prototype._roundedRect=function(a){a.beginPath();var b=this._displayDimensions,c=this._displayBorderRadius;a.moveTo(b.x+c.x,b.y);a.lineTo(b.x+b.w-c.x,b.y);a.quadraticCurveTo(b.x+b.w,b.y,b.x+b.w,b.y+c.y);a.lineTo(b.x+b.w,b.y+b.h-c.y);a.quadraticCurveTo(b.x+b.w,b.y+b.h,b.x+b.w-c.x,b.y+b.h);a.lineTo(b.x+c.x,b.y+b.h);a.quadraticCurveTo(b.x,b.y+b.h,
b.x,b.y+b.h-c.y);a.lineTo(b.x,b.y+c.y);a.quadraticCurveTo(b.x,b.y,b.x+c.x,b.y);a.closePath();a.fill()};c.prototype.updateDimensions=function(a){e.prototype.updateDimensions.call(this,a);this._displayBorderRadius={x:this._borderRadius*this._canvas.zoomFactor.x,y:this._borderRadius*this._canvas.zoomFactor.y}};c.prototype._cloneForEffect=function(a){var b=d.cloneRect(this._dimensions);return new c(a,b)};return c}(d.CanvasElement);d.RectangleElement=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a,b,c){a=e.call(this,a)||this;a._type=d.ElementType.Text;a._text=b;a._dimensions={x:c.x,y:c.y,w:10,h:10};a._initializeRects();a._addStyleChangeListener();return a}__extends(c,e);Object.defineProperty(c.prototype,"text",{set:function(a){this._text=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fixed",{set:function(a){this._fixed=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"type",{get:function(){return d.ElementType.Text},
enumerable:!0,configurable:!0});c.prototype._setCanvas=function(a){e.prototype._setCanvas.call(this,a);this._calculateTextMetrics()};c.prototype._addStyleChangeListener=function(){var a=this;this._style.addStyleChangeListener(d.StyleChangeEnum.FONT_SIZE,function(){a._dimensions.h=a._style.fontSize})};c.prototype._calculateTextMetrics=function(){if(this._canvas){var a=this._canvas.context;this._applyStyle(a);var b=a.measureText(this._text);this._restoreStyle(a);this._dimensions.w=b.width;this._dimensions.h=
this.style.fontSize;this._displayDimensions.w=b.width;this._displayDimensions.h=this.style.fontSize}};c.prototype._onDraw=function(a){a.fillText(this._text,this._displayDimensions.x,this._displayDimensions.y+(this._fixed?this._dimensions.h:this._displayDimensions.h));this._displayDimensions.w=this._dimensions.w;this._displayDimensions.h=this._dimensions.h};c.prototype._cloneForEffect=function(a){return new c(a,this._text,{x:this._dimensions.x,y:this._dimensions.y})};return c}(d.CanvasElement);d.TextElement=
e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a,b,c){a=e.call(this,a)||this;c=d.isNumber(c)?{x:c,y:c}:c;a._dimensions={x:b.x-c.x,y:b.y-c.y,w:2*c.x,h:2*c.y};a._center=b;a._radius=c;a._initializeRects();return a}__extends(c,e);Object.defineProperty(c.prototype,"type",{get:function(){return d.ElementType.Circle},enumerable:!0,configurable:!0});c.prototype._onDraw=function(a){a.beginPath();a.arc(this._displayDimensions.x+this._displayRadius.x,this._displayDimensions.y+this._displayRadius.y,this._displayRadius.x,
0,2*Math.PI);a.fill();this._restoreStyle(a)};c.prototype.updateDimensions=function(a){e.prototype.updateDimensions.call(this,a);this._displayRadius={x:this._radius.x*this._canvas.zoomFactor.x,y:this._radius.y*this._canvas.zoomFactor.y}};c.prototype._debugDimensions=function(){console.log("CIRCLE:");console.log("center pt: "+Math.round(this._displayDimensions.x+this._displayRadius.x)+", "+Math.round(this._displayDimensions.y+this._displayRadius.y));console.log("radius: "+Math.round(this._displayRadius.x));
this._canvas.debugRelativeDimensions()};c.prototype._cloneForEffect=function(a){var b={x:this._dimensions.x+this._radius.x,y:this._dimensions.y+this._radius.y},f=d.clonePoint(this._radius);return new c(a,b,f)};c.prototype._scale=function(a){this._isEffect&&(e.prototype._scale.call(this,a),this._radius={x:this._radius.x*a,y:this._radius.y*a})};return c}(d.CanvasElement);d.CircleElement=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a,b){a=e.call(this,a)||this;a._initializeRects();b?(a._points=b,a._updateExtremaFromPoints()):a._points=[];return a}__extends(c,e);Object.defineProperty(c.prototype,"type",{get:function(){return d.ElementType.Path},enumerable:!0,configurable:!0});c.prototype._initializeRects=function(){this._dimensions={x:0,y:0,w:0,h:0};e.prototype._initializeRects.call(this);this._needsInitialDimensions=!0};c.prototype.addPoint=function(a){this._points.push(a);this._updateExtremaFromPoint(a)};
c.prototype._updateExtremaFromPoints=function(){for(var a,b=0,c=this._points;b<c.length;b++)a=c[b],this._updateExtremaFromPoint(a)};c.prototype._updateExtremaFromPoint=function(a){this._needsInitialDimensions||a.x<this._dimensions.x?this._dimensions.x=a.x:a.x>this._dimensions.x+this._dimensions.w&&(this._dimensions.w=a.x-this._dimensions.x);this._needsInitialDimensions||a.y<this._dimensions.y?this._dimensions.y=a.y:a.y>this._dimensions.y+this._dimensions.h&&(this._dimensions.h=a.y-this._dimensions.y);
this._needsInitialDimensions=!1};c.prototype._onDraw=function(a){a.beginPath();for(var b,c=0,d=this._displayPoints;c<d.length;c++)b=d[c],a.lineTo(b.x,b.y);a.closePath();a.fill()};c.prototype.updateDimensions=function(a){e.prototype.updateDimensions.call(this,a);this._displayPoints=[];for(var b,c=0,d=this._points;c<d.length;c++)b=d[c],this._displayPoints.push({x:(b.x-a.x)*this._canvas.zoomFactor.x,y:(b.y-a.y)*this._canvas.zoomFactor.y})};c.prototype.adjustDimensions=function(a){if(!this._isEffect){e.prototype.adjustDimensions.call(this,
a);for(var b,c=0,d=this._points;c<d.length;c++)b=d[c],b.x+=a.x,b.y+=a.y}};c.prototype._cloneForEffect=function(a){return new c(a,d.clonePointArray(this._points))};c.prototype._scale=function(a){if(this._isEffect){for(var b={x:this._dimensions.x+this._dimensions.w/2,y:this._dimensions.y+this._dimensions.h/2},c,d=[],e=0,g=this._points;e<g.length;e++)c=g[e],c=this._scalePoint(c,b,a),d.push(c);this._points=d;this._updateExtremaFromPoints()}};c.prototype._scalePoint=function(a,b,c){var f=d.Trig.getAngle(b,
a);a=d.Trig.getDistance(b,a);return d.Trig.getEndPoint(b,f,a*c)};return c}(d.CanvasElement);d.PathElement=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a,b){a=e.call(this,a)||this;a._respondToScale=!1;a._elements=new d.Collection;a._referencePoint=b?{x:b.x,y:b.y}:{x:0,y:0};a._initializeRects();return a}__extends(c,e);Object.defineProperty(c.prototype,"type",{get:function(){return d.ElementType.Group},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"referencePoint",{set:function(a){this.adjustDimensions({x:a.x-this._referencePoint.x,y:a.y-this._referencePoint.y})},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"isHoverTarget",{get:function(){var a=!1;this._elements.map(function(b){b.isHoverTarget&&(a=!0)});return a},enumerable:!0,configurable:!0});c.prototype._initializeRects=function(){this._dimensions={x:this._referencePoint.x,y:this._referencePoint.y,w:0,h:0};this._needsInitialDimensions=!0;e.prototype._initializeRects.call(this)};c.prototype._onDraw=function(a){this._elements.map(function(a){a.draw()})};c.prototype.updateDimensions=function(a){e.prototype.updateDimensions.call(this,
a);this._isOffScreen||this._elements.map(function(b){b.updateDimensions(a)})};c.prototype.addElement=function(a){a.adjustDimensions(this._referencePoint);this._elements.addElement(a.id,a);a.parent=this;this._canvas&&(a.canvas=this._canvas,this._canvas.needsRedraw=!0);this._updateInternalDimensionsFromElement(a)};c.prototype._updateInternalDimensionsFromElement=function(a){var b=this._dimensions.x,c=this._dimensions.y,d=this._dimensions.w,e=this._dimensions.h;a.dimensions.x<b&&(b=a.dimensions.x);a.dimensions.x+
a.dimensions.w>b+d&&(d=a.dimensions.x+a.dimensions.w-b);a.dimensions.y<c&&(c=a.dimensions.y);a.dimensions.y+a.dimensions.h>c+e&&(e=a.dimensions.y+a.dimensions.h-c);this._dimensions={x:b,y:c,w:d,h:e};this._needsInitialDimensions=!1};c.prototype.handleEvent=function(a,b,c){e.prototype.handleEvent.call(this,a,b,c);if(b){a!==d.EventTypeEnum.LEAVE&&a!==d.EventTypeEnum.HOVER||this._clearHover(b,c);for(var f,g=0,m=this._findElementsAtPoint(b);g<m.length;g++)f=m[g],f.handleEvent(a,b,c)}};c.prototype._clearHover=
function(a,b){this._elements.map(function(c){c.isHoverTarget&&c.leave(a,b)})};c.prototype._findElementsAtPoint=function(a){var b=[];this._elements.map(function(c){c.isOffScreen||d.Trig.isPointContained(a,c.displayDimensions)&&b.push(c)});return b};c.prototype.removeElement=function(a){return this._elements.removeElement(a)?this._canvas.needsRedraw=!0:!1};c.prototype._cloneForEffect=function(a){d.clonePoint(this._referencePoint);var b=new c(a);this._elements.map(function(a){a=a._cloneForEffect(a.id+
"|e");b.addElement(a)});return b};c.prototype._scale=function(a){this._isEffect&&this._elements.map(function(b){b._scale(a)})};c.prototype.adjustDimensions=function(a){e.prototype.adjustDimensions.call(this,a);this._referencePoint.x+=a.x;this._referencePoint.y+=a.y;this._elements.map(function(b){b.adjustDimensions(a)})};c.prototype._setCanvas=function(a){var b=this;e.prototype._setCanvas.call(this,a);this._elements.map(function(a){a.canvas=b._canvas;b._updateInternalDimensionsFromElement(a)})};return c}(d.CanvasElement);
d.CanvasGroup=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a,b){var c=e.call(this)||this;c._id=a?a:"canvas";c._layers=[];c._needsInitialDimensions=!0;c._reconcileOptions(b);c._initializeRectangles();c._createElements();c._addEventListeners();return c}__extends(c,e);Object.defineProperty(c.prototype,"relativeView",{get:function(){return this._relativeView},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"zoomFactor",{get:function(){return this._zoomFactor},set:function(a){this._zoomFactor=a},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"needsRedraw",{get:function(){return this._needsRedraw},set:function(a){this._needsRedraw=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"canvas",{get:function(){return this._elems.base},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"effectCanvas",{get:function(){return this._elems.effectCanvas},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"context",{get:function(){return this._context},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"effectContext",{get:function(){return this._effectContext},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"layers",{get:function(){return this._layers},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"onPreRender",{set:function(a){this._onPreRender=a},enumerable:!0,configurable:!0});c.prototype._reconcileOptions=function(a){a||(a={});var b=this._createDefaultOptions();this._options=d.reconcileOptions(a,
b)};c.prototype._createDefaultOptions=function(){var a=this;return{RENDER_RATE:30,ZOOM_DELTA:function(){return{x:.03*a._zoomFactor.x,y:.03*a._zoomFactor.y}},SIZE:{width:600,height:450},MAX_ZOOM:{x:15,y:15},MIN_ZOOM:{x:.1,y:.1}}};c.prototype._initializeRectangles=function(){this._absoluteDimensions={x:0,y:0,w:this._options.SIZE.width,h:this._options.SIZE.height};this._relativeView={x:0,y:0,w:this._options.SIZE.width,h:this._options.SIZE.height};this._zoomFactor={x:1,y:1}};c.prototype._shouldSkipCreateElements=
function(){return!0};c.prototype._createElements=function(){this._elems={base:this._createCanvas(),effectCanvas:this._createCanvas(!0)};this._context=this._elems.base.getContext("2d");this._effectContext=this._elems.effectCanvas.getContext("2d")};c.prototype._createCanvas=function(a){var b=document.createElement("canvas");b.setAttribute("width",this._options.SIZE.width.toString());b.setAttribute("height",this._options.SIZE.height.toString());var c="canvas";a&&(c+=" effects");d.addClass(b,c);return b};
c.prototype.draw=function(a){e.prototype.draw.call(this,a);a.appendChild(this._elems.effectCanvas);this._needsRedraw=!0};c.prototype.clear=function(){this._context.clearRect(0,0,this._options.SIZE.width,this._options.SIZE.height);this._effectContext.clearRect(0,0,this._options.SIZE.width,this._options.SIZE.height)};c.prototype._drawEachElement=function(){this.clear();for(var a,b=0,c=this._layers;b<c.length;b++)if(a=c[b])a.updateDimensions(this._relativeView),a.draw()};c.prototype._renderFrame=function(){var a=
this;this._needsRedraw&&(this._onPreRender&&this._onPreRender(),this._drawEachElement(),this._needsRedraw=!1);window.requestAnimationFrame(function(){a._renderFrame()})};c.prototype.addElement=function(a){this._getOrCreateLayer(a.layer).addElement(a);this._updateAbsoluteDimensionsFromElem(a.dimensions);this._needsRedraw=!0};c.prototype.removeElement=function(a){for(var b,c,d=0,e=this._layers;d<e.length;d++)if(c=e[d])if(b=c.removeElement(a))break;return b};c.prototype._updateAbsoluteDimensionsFromElem=
function(a){if(this._needsInitialDimensions||a.x<this._absoluteDimensions.x)this._absoluteDimensions.x=a.x;a.x+a.w>this._absoluteDimensions.x+this._absoluteDimensions.w&&(this._absoluteDimensions.w=a.x+a.w-this._absoluteDimensions.x);if(this._needsInitialDimensions||a.y<this._absoluteDimensions.y)this._absoluteDimensions.y=a.y;a.y+a.h>this._absoluteDimensions.y+this._absoluteDimensions.h&&(this._absoluteDimensions.h=a.y+a.h-this._absoluteDimensions.y);this._needsInitialDimensions=!1};c.prototype._getOrCreateLayer=
function(a){var b=this._layers[a];b||(b=new d.CanvasGroup("layer"+a),this._layers[a]=b,b.canvas=this);return b};c.prototype._onMouseWheel=function(a){a=a.wheelDelta;a=Math.abs(a)/a;this.zoom(a)};c.prototype.zoom=function(a){var b=this._options.ZOOM_DELTA(),c=this._zoomFactor.x+a*b.x;c=d.normalizeValue(c,this._options.MIN_ZOOM.x,this._options.MAX_ZOOM.x);a=this._zoomFactor.y+a*b.y;a=d.normalizeValue(a,this._options.MIN_ZOOM.y,this._options.MAX_ZOOM.y);var e=this._options.SIZE;b=d.roundToPlace(1/c*
e.width,10);this._zoomFactor.x=c;c=d.roundToPlace(1/a*e.height,10);this._zoomFactor.y=a;a=b-this._relativeView.w;c-=this._relativeView.h;this._relativeView={x:this._relativeView.x-a/2,y:this._relativeView.y-c/2,w:this._relativeView.w+a,h:this._relativeView.h+c};this._needsRedraw=!0};c.prototype.changeView=function(a){this._relativeView=a};c.prototype._onDrag=function(a){a&&(a=this._calculateNewCornerFromDelta(a),this.pan(a))};c.prototype._calculateNewCornerFromDelta=function(a){return{x:this._relativeView.x-
a.x/this._zoomFactor.x,y:this._relativeView.y-a.y/this._zoomFactor.y}};c.prototype.pan=function(a){this._relativeView.x=a.x;this._relativeView.y=a.y;this._needsRedraw=!0};c.prototype._addEventListeners=function(){var a=this;window.addEventListener("mousewheel",function(b){a._onMouseWheel(b)});window.addEventListener("mousedown",function(b){a._elems.base.style.cursor="-webkit-grabbing";a._startDragPoint={x:b.screenX,y:b.screenY}});window.addEventListener("mousemove",function(b){a._startDragPoint&&
(a._deltaDragPoint={x:b.screenX-a._startDragPoint.x,y:b.screenY-a._startDragPoint.y},a._startDragPoint={x:b.screenX,y:b.screenY},a._onDrag(a._deltaDragPoint))});window.addEventListener("mouseup",function(){a._startDragPoint=null;a._deltaDragPoint={x:0,y:0};a._elems.base.style.cursor="-webkit-grab"});this._elems.base.addEventListener("click",function(b){a._onClick(b,{x:b.pageX,y:b.pageY})});this._elems.base.addEventListener("mousemove",function(b){a._onHover(b,{x:b.pageX,y:b.pageY})});window.requestAnimationFrame(function(){a._renderFrame()})};
c.prototype._onClick=function(a,b){this._handleEvent(d.EventTypeEnum.CLICK,b,a)};c.prototype._onHover=function(a,b){this._handleEvent(d.EventTypeEnum.HOVER,b,a)};c.prototype._handleEvent=function(a,b,c){for(var d,f=0,e=this._layers;f<e.length;f++)(d=e[f])&&d.handleEvent(a,b,c)};c.prototype.convertRelativePointToPhysicalPoint=function(a){return{x:(a.x-this._relativeView.x)*this._elems.base.offsetWidth/this._relativeView.w+this._elems.base.offsetLeft,y:(a.y-this._relativeView.y)*this._elems.base.offsetHeight/
this._relativeView.h+this._elems.base.offsetTop}};c.prototype.convertPhysicalPointToRelativePoint=function(a){return{x:(a.x-this._elems.base.offsetLeft)*this._relativeView.w/this._elems.base.offsetWidth+this._relativeView.x,y:(a.y-this._elems.base.offsetTop)*this._relativeView.h/this._elems.base.offsetHeight+this._relativeView.y}};c.prototype.convertAbsolutePointToRelativePoint=function(a){return{x:d.roundToPlace((a.x-this._relativeView.x)*this._zoomFactor.x,10),y:d.roundToPlace((a.y-this._relativeView.y)*
this._zoomFactor.y,10)}};c.prototype.convertRelativePointToAbsolutePoint=function(a){return{x:d.roundToPlace(a.x/this._zoomFactor.x+this._relativeView.x,10),y:d.roundToPlace(a.y/this._zoomFactor.y+this._relativeView.y,10)}};c.prototype.convertAbsoluteRectToRelativeRect=function(a){var b=this.convertAbsolutePointToRelativePoint({x:a.x,y:a.y});a=this.convertAbsolutePointToRelativePoint({x:a.x+a.w,y:a.y+a.h});return{x:b.x,y:b.y,w:a.x-b.x,h:a.y-b.y}};c.prototype.debugRelativeDimensions=function(){console.log("CANVAS DIMENSIONS:");
console.log(Math.round(this.relativeView.x)+", "+Math.round(this.relativeView.y));console.log(Math.round(this.relativeView.w)+" x "+Math.round(this.relativeView.h))};return c}(d.Drawable);d.HTML5Canvas=e})(KIP||(KIP={}));
(function(d){var e;(function(c){c[c.NORMAL=0]="NORMAL";c[c.WEEKEND=1]="WEEKEND";c[c.HOLIDAY=2]="HOLIDAY";c[c.TODAY=3]="TODAY"})(e=d.ProjectDayFormatting||(d.ProjectDayFormatting={}));var g=function(c){function a(a){a=c.call(this,"timeline",a)||this;a._handleCanvasForTimeline();return a}__extends(a,c);Object.defineProperty(a.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"needsVerticalAdjustment",{set:function(a){this._needsVerticalAdjustment=
!0},enumerable:!0,configurable:!0});a.prototype._createDefaultOptions=function(){var a=this,f=c.prototype._createDefaultOptions.call(this);f.DAY_HEIGHT=20;f.DAY_WIDTH=20;f.CENTRAL_DATE=d.Dates.getToday();f.SIZE={width:window.innerWidth-15,height:window.innerHeight-15};f.MONTH_COLORS="#D30 #D70 #EA0 #AD0 #0C3 #0D9 #0DC #05D #40D #80D #A0D #C07".split(" ");f.DAY_FORMATTING={NORMAL:"#fafafa",WEEKEND:"#ccc",HOLIDAY:"#ccc",TODAY:"#333"};f.ZOOM_DELTA=function(){return{x:.03*a.zoomFactor.x,y:.01*a.zoomFactor.y}};
f.DATE_BG_COLOR="#FFF";f.BORDER_COLOR="#bbb";f.FONT_SIZE=12;f.BETWEEN_GROUP_GAP=10;f.MAX_ZOOM.y=Math.pow(1.01,Math.log(f.MAX_ZOOM.x/1.03));f.MIN_ZOOM.y=Math.pow(1.01,Math.log(f.MIN_ZOOM.x)/Math.log(1.03));return f};a.prototype._reconcileOptions=function(a){this._options=d.reconcileOptions(a,this._createDefaultOptions())};a.prototype._handleCanvasForTimeline=function(){var a=this;this._centralDateLocation=this._options.SIZE.width/2;this.onPreRender=function(){a._createVisibleBackground()};this._layers[1]=
this._getOrCreateLayer(1);this._elemLayer=this._layers[1]};a.prototype.convertDateToPoint=function(a,c){a=d.Dates.dateDiff(a,this._options.CENTRAL_DATE,!0,!0);var b=this._options.DAY_WIDTH;c&&(b*=this.zoomFactor.x);return{x:this._centralDateLocation+a*b,y:0}};a.prototype.convertPointToDate=function(a,c){a=a.x-this._centralDateLocation;var b=this._options.DAY_WIDTH;c&&(b*=this.zoomFactor.x);c=new Date(this._options.CENTRAL_DATE);d.Dates.addToDate(c,{days:a/b});return c};a.prototype.addTimelineElement=
function(a){a.adjustDimensions({x:0,y:this._elemLayer.dimensions.h+this._options.BETWEEN_GROUP_GAP});this._elemLayer.addElement(a);return!0};a.prototype.adjustVerticalPosition=function(){};a.prototype._createVisibleBackground=function(){var a=this._getDateExtrema(),c=new d.CanvasGroup("bg",{x:0,y:0});c.layer=0;var e=new d.CanvasGroup("header",{x:0,y:0});e.layer=99;for(var g=this._relativeView.x,m=a.min,l=d.roundToPlace(this._options.DAY_HEIGHT/this._zoomFactor.y,10),q=d.Dates.dateDiff(a.max,a.min,
!1,!1,!1)+1,p=0;p<q;p+=1){var n=d.Dates.addToDate(new Date(a.min),{days:p});n=d.Dates.clearTimeInfo(n);var r=this.convertDateToPoint(n);r.y=this._relativeView.y+l;0===p&&(r.x=this._relativeView.x);var t=p===q-1,u=this._createDayDivisions(n,r);c.addElement(u);n.getMonth()!==m.getMonth()&&(u=this._createMonthHeader(m,{x:g,y:this._relativeView.y},{x:r.x,y:this._relativeView.y+l}),m=n,g=r.x,e.addElement(u));t&&(u=this._createMonthHeader(m,{x:g,y:this._relativeView.y},{x:this._relativeView.x+this._relativeView.w,
y:this._relativeView.y+l}),m=n,g=r.x,e.addElement(u));n=this._createDayHeader(n,r);null!==n&&e.addElement(n)}this.removeElement("bg");this.removeElement("header");this.addElement(c);this.addElement(e)};a.prototype._getDateExtrema=function(){var a=this._relativeView,c={x:a.x,y:a.y};return{max:this.convertPointToDate({x:a.x+a.w,y:a.y+a.h}),min:this.convertPointToDate(c)}};a.prototype._createMonthHeader=function(a,c,e){var b=this._createMonthLabel(a);e=this._createMonthColor(a,c,e);a=new d.CanvasGroup("month|"+
d.Dates.shortDate(a),{x:c.x,y:c.y});a.addElement(e);a.addElement(b);return a};a.prototype._createMonthLabel=function(a){var b=d.Dates.getMonthName(a,!0),c=d.Dates.getShortYear(a);a=new d.TextElement("month|lbl|"+d.Dates.shortDate(a),b+" "+c,{x:5,y:0});a.style.fillColor="#FFF";a.style.fontSize=14;a.fixed=!0;return a};a.prototype._createMonthColor=function(a,c,e){c=new d.RectangleElement("month|rect|"+d.Dates.shortDate(a),{x:0,y:0,w:e.x-c.x,h:e.y-c.y});c.style.fillColor=this._getMonthColor(a.getMonth());
return c};a.prototype._createDayHeader=function(a,c){if(15>this._options.DAY_WIDTH*this._zoomFactor.x)return null;var b=this._createDayLabel(a),f=this._createDayBackground(a);a=new d.CanvasGroup("day|"+d.Dates.shortDate(a),{x:c.x,y:c.y});a.addElement(f);a.addElement(b);return a};a.prototype._createDayLabel=function(a){a=new d.TextElement("day|lbl|"+a.getDate(),a.getDate().toString(),{x:this._options.DAY_WIDTH/2,y:0});a.style.fillColor="#333";a.style.fontSize=12;a.fixed=!0;a.style.textAlign="center";
return a};a.prototype._createDayBackground=function(a){a=new d.RectangleElement("day|rect|"+a.getDate(),{x:0,y:0,w:this._options.DAY_WIDTH,h:this._options.DAY_HEIGHT/this._zoomFactor.y*.75});a.style.fillColor=this._options.DATE_BG_COLOR;return a};a.prototype._createDayDivisions=function(a,c){var b=this._getDayFormatting(a),f=1/this._zoomFactor.x;f=new d.RectangleElement("day|b.left|"+d.Dates.shortDate(a),{x:this._options.DAY_WIDTH-f,y:0,w:f,h:this._relativeView.h});f.style.fillColor=this._options.BORDER_COLOR;
var g=new d.RectangleElement("day|bg|"+d.Dates.shortDate(a),{x:0,y:0,w:this._options.DAY_WIDTH,h:this._relativeView.h});g.style.fillColor=b===e.TODAY?this._options.DAY_FORMATTING.TODAY:b===e.HOLIDAY?this._options.DAY_FORMATTING.HOLIDAY:b===e.WEEKEND?this._options.DAY_FORMATTING.WEEKEND:this._options.DAY_FORMATTING.NORMAL;a=new d.CanvasGroup("day|division|"+d.Dates.shortDate(a),{x:c.x,y:this._relativeView.y});a.addElement(g);a.addElement(f);return a};a.prototype._getDayFormatting=function(a){e;return d.Dates.isToday(a)?
e.TODAY:d.Dates.isWeekend(a)?e.WEEKEND:e.NORMAL};a.prototype._getMonthColor=function(a){return this._options.MONTH_COLORS[a]};return a}(d.HTML5Canvas);d.Timeline=g})(KIP||(KIP={}));
(function(d){var e=function(d){function c(a,b){return d.call(this,a,b,{x:0,y:0})||this}__extends(c,d);Object.defineProperty(c.prototype,"startDate",{get:function(){return this._startDate},set:function(a){this._startDate=a;this._updatePoint()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"endDate",{get:function(){return this._startDate},set:function(a){},enumerable:!0,configurable:!0});c.prototype._setCanvas=function(a){d.prototype._setCanvas.call(this,a);this._updatePoint()};
c.prototype._updatePoint=function(){if(this._canvas&&this._startDate){var a=this._canvas.convertDateToPoint(this._startDate);this._dimensions.x=a.x}};c.prototype.updateDimensions=function(a){d.prototype.updateDimensions.call(this,a);this.isOffScreen&&(this._dimensions.y<a.y||this._dimensions.y+this._dimensions.h>a.y+a.h)||!(this._dimensions.x<a.x)||(this._displayDimensions.x=0,this._isOffScreen=!1)};return c}(d.TextElement);d.TimelineLabel=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a,b){a=e.call(this,a)||this;a._isCollapsed=!1;a._reconcileOptions(b);return a}__extends(c,e);Object.defineProperty(c.prototype,"startDate",{get:function(){return this._startDate},set:function(a){this._startDate=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"endDate",{get:function(){return this._endDate},set:function(a){this._endDate=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isCollapsed",{get:function(){return this._isCollapsed},
enumerable:!0,configurable:!0});c.prototype._createDefaultOptions=function(){return{HORIZONTAL:!1,ELEMENT_GAP:2,ELEM_HEIGHT:20}};c.prototype._reconcileOptions=function(a){var b=this._createDefaultOptions();this._options=d.reconcileOptions(a,b)};c.prototype.addElement=function(a){this._reconcileDates(a);0===a.dimensions.h&&a.type!==d.ElementType.Group&&(a.dimensions.h=this._options.ELEM_HEIGHT);this._options.HORIZONTAL||a.adjustDimensions({x:0,y:this._dimensions.h+this._options.ELEMENT_GAP});e.prototype.addElement.call(this,
a)};c.prototype._reconcileDates=function(a){if(a.startDate){if(!this._startDate||a.startDate<this._startDate){this._startDate=a.startDate;var b=!0}if(!this._endDate||a.endDate>this._endDate)this._endDate=a.endDate;b&&this._updateLabels()}else a.startDate=this._startDate};c.prototype._setCanvas=function(a){e.prototype._setCanvas.call(this,a)};c.prototype.sort=function(a){};c.prototype._updateLabels=function(){var a=this;this._elements.map(function(b){b.type===d.ElementType.Text&&(b.startDate=a._startDate)})};
return c}(d.CanvasGroup);d.TimelineGroup=e})(KIP||(KIP={}));
(function(d){var e=function(d){function c(a,b){a=d.call(this,a,[])||this;a._date=b;return a}__extends(c,d);Object.defineProperty(c.prototype,"startDate",{get:function(){return this._date},set:function(a){},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"endDate",{get:function(){return this._date},set:function(a){},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"canvas",{set:function(a){this._canvas=a;a=this._canvas.convertDateToPoint(this._date);this._dimensions.x=
a.x;this._setPoints()},enumerable:!0,configurable:!0});c.prototype._setPoints=function(){var a=this._dimensions.x,b=this._dimensions.y;this._points=[{x:0,y:-2},{x:1,y:-2},{x:1,y:8},{x:0,y:8}];for(var c,d=0,e=this._points;d<e.length;d++)c=e[d],c.x+=a,c.y+=b};return c}(d.PathElement);d.TimelineEvent=e})(KIP||(KIP={}));
(function(d){var e=function(d){function c(a,b,c){a=d.call(this,a,{x:0,y:0,w:0,h:0})||this;a._startDate=b;a._endDate=c;return a}__extends(c,d);Object.defineProperty(c.prototype,"startDate",{get:function(){return this._startDate},set:function(a){},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"endDate",{get:function(){return this._endDate},set:function(a){},enumerable:!0,configurable:!0});c.prototype._constructDefaultOptions=function(){return{COLOR:"#333",FONT_SIZE:10}};Object.defineProperty(c.prototype,
"canvas",{set:function(a){this._canvas=a;this._calculatePosition()},enumerable:!0,configurable:!0});c.prototype._calculatePosition=function(){if(this._parent&&this._canvas){var a=this._canvas.convertDateToPoint(this._startDate),b=this._canvas.convertDateToPoint(this._endDate);this._dimensions={x:a.x,y:this._dimensions.y,w:b.x-a.x,h:this._dimensions.h}}};return c}(d.RectangleElement);d.Timespan=e})(KIP||(KIP={}));
(function(d){(function(d){(function(d){d[d.TEXT=1]="TEXT";d[d.NUMBER=2]="NUMBER";d[d.DATE=3]="DATE";d[d.TIME=4]="TIME";d[d.DATE_TIME=5]="DATE_TIME";d[d.SELECT=6]="SELECT";d[d.CHECKBOX=7]="CHECKBOX";d[d.TEXTAREA=8]="TEXTAREA";d[d.ARRAY=9]="ARRAY";d[d.ARRAY_CHILD=10]="ARRAY_CHILD";d[d.TOGGLE_BUTTON=11]="TOGGLE_BUTTON";d[d.CUSTOM=12]="CUSTOM";d[d.SECTION=13]="SECTION";d[d.HIDDEN=14]="HIDDEN";d[d.FILE_UPLOAD=15]="FILE_UPLOAD";d[d.FILE_PATH=16]="FILE_PATH"})(d.FormElementTypeEnum||(d.FormElementTypeEnum=
{}));(function(d){d[d.MULTILINE=0]="MULTILINE";d[d.TABLE=1]="TABLE";d[d.FLEX=2]="FLEX";d[d.LABEL_AFTER=3]="LABEL_AFTER"})(d.FormElementLayoutEnum||(d.FormElementLayoutEnum={}))})(d.Forms||(d.Forms={}))})(KIP||(KIP={}));
(function(d){(function(e){e.cloneTemplate=function(d){return{type:d.type,value:d.value,position:d.position,required:d.required,onValidate:d.onValidate,onOtherChange:d.onOtherChange,label:d.label,cls:d.cls,layout:d.layout}};e.createSelectElement=function(e,c,a,b){var f=[];d.map(a,function(a,c){a={type:"option",attr:{value:c},content:a};b===c&&(a.attr.selected="true");f.push(a)});return d.createElement({id:e,cls:c,type:"select",children:f})};e.createLabeledCheckbox=function(e,c,a,b){var f=d.createSimpleElement(e+
"|wrapper",c+"|wrapper");b=d.createElement({type:"input",id:e,cls:c,attr:{type:"checkbox",checked:b.toString(),name:e},parent:f});d.createSimpleElement("",c+"|lbl",a,{for:e},null,f);return{wrapper:f,checkbox:b}};e.createLabelForInput=function(e,c,a,b){return d.createElement({type:"label",cls:a,attr:{for:c},content:e,parent:b})};e.createRadioButtons=function(){};e.createInputElement=function(e,c,a,b,f,h,k){var g="input";a=a.toLowerCase();"textarea"===a&&(a="",g="textarea");f=f||{};f.type=a;b&&("checkbox"===
a||"radio"===a?f.checked=b:f.value="date"===a?d.Dates.inputDateFmt(b):b);return d.createElement({type:g,id:e,cls:c,attr:f,children:h,parent:k})}})(d.Forms||(d.Forms={}))})(KIP||(KIP={}));
(function(d){(function(e){function g(a){return a?void 0!==a.id&&void 0!==a.type:!1}e.isFormElement=g;var c=function(a){function b(b,c){var d=a.call(this)||this;d._standardCls="kipFormElem";d._addClassName("FormElement");d._id=b;g(c)?d._cloneFromFormElement(c):d._parseElemTemplate(c);d._createElements();return d}__extends(b,a);Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"type",{get:function(){return this._type},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"data",{get:function(){return this._data},set:function(a){this.update(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onOtherChange",{get:function(){return this._onOtherChange},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"template",{get:function(){return this._template},enumerable:!0,configurable:!0});b.prototype._cloneFromFormElement=function(a){this._parseElemTemplate(a.template)};b.prototype._parseElemTemplate=
function(a){var b=this;d.isNullOrUndefined(a)&&(a={});this._label=a.label||this._id;d.isNullOrUndefined(this._label)&&(this._label=this._id);this._type=a.type||this._type;this._data=a.value;d.isNullOrUndefined(this._data)&&(this._data=this._defaultValue);this._layout=a.layout||e.FormElementLayoutEnum.MULTILINE;this._required=a.required;this._position=a.position;this._cls=d.Styles.buildClassString(this._standardCls,this._defaultCls,a.cls,a.required?"required":"");this._onValidate=a.onValidate;(this._onOtherChange=
a.onOtherChange)&&d.Events.addEventListener(e.FORM_ELEM_CHANGE,{func:function(a){b._handleOtherChange(a)},uniqueId:this._id});this._template=a};b.prototype._parseElement=function(a,b){b||(b="");return a._createClonedElement(b)};b.prototype._createElements=function(){var a=this;this._elems={core:d.createSimpleElement("",this._cls),error:d.createSimpleElement("","error")};this._elems.core.appendChild(this._elems.error);this._onCreateElements();this._elems.input&&this._elems.input.addEventListener("change",
function(){a._changeEventFired()});this._createStyles()};b.prototype._tableLayout=function(){for(var a=[],b=0;2>b;b+=1){var c=d.createElement({type:"td",cls:"frmCel"});a[b]=c}this._elems.lbl&&a[0].appendChild(this._elems.lbl);this._elems.input&&a[1].appendChild(this._elems.input);this._elems.table=d.createTable("","",a);this._elems.core.appendChild(this._elems.table)};b.prototype._flexLayout=function(){this._addStandardElemsToCore();d.addClass(this._elems.core,"flex")};b.prototype._multiLineLayout=
function(){this._addStandardElemsToCore();d.addClass(this._elems.core,"multiline")};b.prototype._labelAfterLayout=function(){this._elems.core.appendChild(this._elems.input);this._elems.core.appendChild(this._elems.lbl)};b.prototype._addStandardElemsToCore=function(){this._elems.core.appendChild(this._elems.lbl);this._elems.core.appendChild(this._elems.input)};b.prototype._handleStandardLayout=function(){var a=e.FormElementLayoutEnum;switch(this._layout){case a.TABLE:return this._tableLayout(),!0;
case a.FLEX:return this._flexLayout(),!0;case a.MULTILINE:return this._multiLineLayout(),!0;case a.LABEL_AFTER:return this._labelAfterLayout(),!0}return!1};b.prototype.save=function(a){return this._data};b.prototype.update=function(a){this._onClear();d.isNullOrUndefined(a)&&(a=this._defaultValue);this._data=a;this._elems.input&&(this._elems.input.value=a)};b.prototype.render=function(a){(this._parent=a||this._parent)&&this._parent.appendChild(this._elems.core)};b.prototype.clear=function(){return this._onClear()};
b.prototype._changeEventFired=function(){this._clearErrors();this._onChange()&&this._dispatchChangeEvent()};b.prototype._clearErrors=function(){this._elems.error&&(this._elems.error.innerHTML="")};b.prototype._validate=function(a){return this._onValidate&&!this._onValidate(a)?!1:!0};b.prototype._onValidateError=function(a){a||(a="uh-oh: "+this._id+"'s data couldn't be saved");console.log(a);this._elems.error&&(this._elems.error.innerHTML=a);this._elems.input&&(this._elems.input.value=this._data)};
b.prototype._dispatchChangeEvent=function(a){d.Events.dispatchEvent(e.FORM_ELEM_CHANGE,{key:this._id,subkey:a,data:this._data})};b.prototype._handleOtherChange=function(a){this._onOtherChange&&this._onOtherChange(a.context.key,a.context.data,this)};b.prototype._standardValidation=function(a){if(!this._validate(a))return this._onValidateError(),!1;this._data=a;return!0};b.prototype._createStandardInput=function(){this._elems.input=e.createInputElement(this._id+"|input","input",e.FormElementTypeEnum[this.type],
this._data)};b.prototype._createStandardLabel=function(a){this._elems.lbl=e.createLabelForInput(this._label,this._id,"lbl",a)};b.prototype._createStandardLabeledInput=function(a){this._createStandardInput();this._createStandardLabel(a?this._elems.input:null)};b.prototype._onClear=function(){this._data=this._defaultValue;this._elems.input&&(this._elems.input.value=this._defaultValue)};b._uncoloredStyles={".kipFormElem, .kipFormElem input, .kipFormElem select, .kipFormElem textarea":{fontSize:"1em",
width:"100%",boxSizing:"border-box"},".kipFormElem":{marginTop:"10px",position:"relative"},".kipFormElem input, .kipFormElem textarea, .kipFormElem select":{fontFamily:"OpenSansLight,Segoe UI,Helvetica",fontSize:"0.8em",border:"1px solid #CCC"},".kipFormElem textarea":{minHeight:"100px",maxWidth:"100%"},".kipFormElem .lbl":{fontSize:"0.9em",color:"#666",width:"100%",boxSizing:"border-box"},".kipFormElem.required .lbl":{},".kipFormElem.required .lbl:after":{content:'"*"',color:"<1>",fontWeight:"bold",
fontSize:"1.8em",position:"absolute",marginLeft:"2px"}};return b}(d.Styles.Stylable);e.FormElement=c})(d.Forms||(d.Forms={}))})(KIP||(KIP={}));
(function(d){(function(e){var g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a.prototype,"_type",{get:function(){return e.FormElementTypeEnum.CHECKBOX},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultValue",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultCls",{get:function(){return"check"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"_layout",{get:function(){return e.FormElementLayoutEnum.LABEL_AFTER},enumerable:!0,configurable:!0});a.prototype._getUncoloredStyles=function(){return this._mergeThemes(a._uncoloredStyles,e.FormElement._uncoloredStyles)};a.prototype._onCreateElements=function(){this._createStandardInput();this._elems.lbl=e.createLabelForInput("",this._id+"|input","",this._elems.core);this._elems.inputBox=d.createSimpleElement("","inputBox","",null,null,this._elems.lbl);this._elems.inputInnerBox=d.createSimpleElement("",
"innerInputBox","",null,null,this._elems.inputBox);this._elems.innerLbl=d.createSimpleElement("","innerLbl",this._label,null,null,this._elems.lbl);this._handleStandardLayout()};a.prototype._onChange=function(){return this._standardValidation(this._elems.input.checked)};a.prototype._createClonedElement=function(b){return new a(this._id+b,this)};a.prototype.update=function(a){this._data=a;this._elems.input.checked=a};a._uncoloredStyles={'.kipFormElem input[type="checkbox"]':{display:"none",zoom:"1.5",
width:"18px",height:"18px",margin:"0",marginRight:"5px",border:"1px solid <0>"},".kipFormElem input[type='checkbox'] + label":{display:"flex"},'.kipFormElem input[type="checkbox"] + label .inputBox':{width:"18px",height:"18px",margin:"0",marginRight:"5px",border:"1px solid <0>",position:"relative",boxSizing:"content-box",flexShrink:"0",marginTop:"4px"},".kipFormElem input[type='checkbox'] + label .inputBox .innerInputBox":{position:"absolute",width:"0",height:"0",left:"9px",top:"9px",backgroundColor:"<0>",
transition:"all ease-in-out .1s"},".kipFormElem input[type='checkbox']:checked + label .inputBox .innerInputBox, .kipFormElem input[type='checkbox']:checked + label:hover .inputBox .innerInputBox":{left:"2px",top:"2px",width:"14px",height:"14px"},".kipFormElem input[type='checkbox'] + label:hover .inputBox .innerInputBox":{left:"4px",top:"4px",width:"10px",height:"10px",opacity:"0.7"},".kipFormElem.check input[type='checkbox'] + label .innerLbl":{display:"flex",flexDirection:"column",justifyContent:"center",
fontSize:"0.9em",paddingTop:"3px"}};return a}(e.FormElement);e.CheckElement=g;g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a.prototype,"_type",{get:function(){return e.FormElementTypeEnum.TEXT},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultValue",{get:function(){return""},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultCls",{get:function(){return"text"},enumerable:!0,configurable:!0});
a.prototype._onCreateElements=function(){this._createStandardLabeledInput(!1);this._handleStandardLayout()};a.prototype._onChange=function(){return this._standardValidation(this._elems.input.value)};a.prototype._createClonedElement=function(b){return new a(this._id+b,this)};return a}(e.FormElement);e.TextElement=g;g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a.prototype,"_type",{get:function(){return e.FormElementTypeEnum.TEXTAREA},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultValue",{get:function(){return""},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultCls",{get:function(){return"textarea"},enumerable:!0,configurable:!0});a.prototype._onCreateElements=function(){var a=e.createInputElement(this._id,"input","textarea",this._data);this._elems.input=a;this._elems.lbl=e.createLabelForInput(this._label,this._id,"lbl");this._handleStandardLayout()};a.prototype._onChange=function(){var a=
this._elems.input.value;a=a.replace(/\n/g,"<br>");a=a.replace(/    /g,"&nbsp;&nbsp;&nbsp;&nbsp;");return this._standardValidation(a)};a.prototype._createClonedElement=function(b){return new a(this._id+b,this)};a.prototype.update=function(a){if(this._data=a)a=a.replace(/<br>/g,"\n"),a=a.replace(/&nbsp;/g," "),this._elems.input.value=a};return a}(e.FormElement);e.TextAreaElement=g;g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a.prototype,
"_type",{get:function(){return e.FormElementTypeEnum.DATE},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultValue",{get:function(){return null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultCls",{get:function(){return"date"},enumerable:!0,configurable:!0});a.prototype._onCreateElements=function(){this._createStandardLabeledInput();this._handleStandardLayout()};a.prototype._onChange=function(){var a=d.Dates.inputToDate(this._elems.input.value);
return this._standardValidation(a)};a.prototype._createClonedElement=function(b){return new a(this._id+b,this)};a.prototype.update=function(a){this._data=a;this._elems.input&&this._data&&(this._elems.input.value=d.Dates.inputDateFmt(a))};return a}(e.FormElement);e.DateElement=g;g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a.prototype,"_type",{get:function(){return e.FormElementTypeEnum.TIME},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"_defaultValue",{get:function(){return null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultCls",{get:function(){return"time"},enumerable:!0,configurable:!0});a.prototype._onCreateElements=function(){this._createStandardLabeledInput();this._handleStandardLayout()};a.prototype._onChange=function(){var a=d.Dates.inputToDate("",this._elems.input.value);return this._standardValidation(a)};a.prototype._createClonedElement=function(b){return new a(this._id+b,this)};a.prototype.update=
function(a){this._data=a;this._elems.input&&this._data&&(this._elems.input.value=d.Dates.shortTime(a))};return a}(e.FormElement);e.TimeElement=g;g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a.prototype,"_type",{get:function(){return e.FormElementTypeEnum.DATE_TIME},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultValue",{get:function(){return null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"_defaultCls",{get:function(){return"dateTime"},enumerable:!0,configurable:!0});a.prototype._onCreateElements=function(){var a=this;this._createStandardLabel(this._elems.core);this._elems.inputWrapper=d.createSimpleElement("","inputs","",null,null,this._elems.core);d.createSimpleElement("","lbl","Date: ",null,null,this._elems.inputWrapper);this._elems.dateInput=e.createInputElement("","dateInput","date",this._data,null,null,this._elems.inputWrapper);this._elems.dateInput.addEventListener("change",
function(){a._changeEventFired()});var c=this._data?d.Dates.shortTime(this._data):"";d.createSimpleElement("","lbl","Time: ",null,null,this._elems.inputWrapper);this._elems.timeInput=e.createInputElement("","timeInput","time",c,null,null,this._elems.inputWrapper);this._elems.timeInput.addEventListener("change",function(){a._changeEventFired()})};a.prototype._onChange=function(){var a=d.Dates.inputToDate(this._elems.dateInput.value,this._elems.timeInput.value);return this._standardValidation(a)};a.prototype._createClonedElement=
function(b){return new a(this._id+b,this)};a.prototype.update=function(a){this._onClear();if(this._data=a)this._elems.dateInput&&(this._elems.dateInput.value=d.Dates.inputDateFmt(a)),this._elems.timeInput&&(this._elems.timeInput.value=d.Dates.shortTime(a))};a._uncoloredStyles={".kipFormElem.dateTime .inputs":{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},".kipFormElem.dateTime .inputs input":{marginRight:"20px",flexGrow:"1",minWidth:"150px"},".kipFormElem.dateTime .inputs .lbl":{flexShrink:"1",
maxWidth:"50px",marginTop:"4px"}};return a}(e.FormElement);e.DateTimeElement=g;g=function(c){function a(a,d){return c.call(this,a,d)||this}__extends(a,c);Object.defineProperty(a.prototype,"_type",{get:function(){return e.FormElementTypeEnum.SELECT},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultValue",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultCls",{get:function(){return"select"},enumerable:!0,configurable:!0});
a.prototype._cloneFromFormElement=function(a){c.prototype._cloneFromFormElement.call(this,a);this._options=a._options};a.prototype._parseElemTemplate=function(a){c.prototype._parseElemTemplate.call(this,a);this._options=a.options};a.prototype._onCreateElements=function(){this._elems.input=e.createSelectElement(this._id,"input",this._options);this._createStandardLabel();this._handleStandardLayout()};a.prototype._onChange=function(){return this._standardValidation(+this._elems.input.value)};a.prototype._createClonedElement=
function(b){return new a(this._id+b,this)};return a}(e.FormElement);e.SelectElement=g;g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a.prototype,"_type",{get:function(){return e.FormElementTypeEnum.NUMBER},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultValue",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultCls",{get:function(){return"number"},enumerable:!0,
configurable:!0});a.prototype._onCreateElements=function(){this._createStandardLabeledInput();this._handleStandardLayout()};a.prototype._onChange=function(){return this._standardValidation(+this._elems.input.value)};a.prototype._createClonedElement=function(b){return new a(this._id+b,this)};return a}(e.FormElement);e.NumberElement=g;g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a.prototype,"_type",{get:function(){return e.FormElementTypeEnum.HIDDEN},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultCls",{get:function(){return"hidden"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultValue",{get:function(){return null},enumerable:!0,configurable:!0});a.prototype._onCreateElements=function(){};a.prototype._onChange=function(){return!0};a.prototype._createClonedElement=function(b){return new a(this.id+b,this)};a.prototype.save=function(){return this._data};a._uncoloredStyles={"kipFormElem.hidden":{display:"none"}};
return a}(e.FormElement);e.HiddenElement=g})(d.Forms||(d.Forms={}))})(KIP||(KIP={}));
(function(d){(function(e){var g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);b.prototype._createCollapsibleTitle=function(){var a=this;this._elems.titleContainer=d.createSimpleElement("","sectionHeaderContainer","",null,null,this._elems.core);this._elems.title=d.createSimpleElement("","sectionHeader",this._label,null,null,this._elems.titleContainer);this._elems.collapseElem=d.createSimpleElement("","caret","\u25b5",null,null,this._elems.titleContainer);this._elems.titleContainer.addEventListener("click",
function(){a._onCaretClicked()});d.addClass(this._elems.core,"collapsible");this.collapse()};b.prototype._onCaretClicked=function(){this._isCollapsed?this.expand():this.collapse()};b.prototype.collapse=function(){d.addClass(this._elems.core,"collapsed");this._isCollapsed=!0};b.prototype.expand=function(){d.removeClass(this._elems.core,"collapsed");this._isCollapsed=!1};b._uncoloredStyles={".kipFormElem.collapsible .formChildren":{maxHeight:"100%"},".kipFormElem.collapsible.collapsed .formChildren":{maxHeight:"0px",
overflow:"hidden"},".kipFormElem.collapsible .sectionHeaderContainer":{display:"flex",justifyContent:"space-between",boxSizing:"border-box",cursor:"pointer",padding:"10px 10px",borderRadius:"3px",alignItems:"center"},".kipFormElem.collapsible .caret":{transformOrigin:"50% 50%",width:".8em",fontSize:"1em",transition:"all ease-in-out .1s",cursor:"pointer"},".kipFormElem.collapsible.collapsed .caret":{transform:"rotate(180deg)"},".kipFormElem.collapsible .sectionHeaderContainer:hover":{backgroundColor:"#eee"}};
return b}(e.FormElement);e.CollapsibleElement=g;var c=function(a){function b(b,c,d){b=a.call(this,b,c)||this;e.isFormElement(c)&&(d=c.children);b._parseChildren(d);return b}__extends(b,a);b.prototype._getUncoloredStyles=function(){return this._mergeThemes(b._uncoloredStyles,g._uncoloredStyles,e.FormElement._uncoloredStyles)};b.prototype.setThemeColor=function(b,c){a.prototype.setThemeColor.call(this,b,c);this._children&&(e.isFormElement(this._children)?this._children.setThemeColor(b,c):d.map(this._children,
function(a){a.setThemeColor(b,c)}))};Object.defineProperty(b.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultCls",{get:function(){return"kipFormElem section"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultValue",{get:function(){return{}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_type",{get:function(){return e.FormElementTypeEnum.SECTION},enumerable:!0,configurable:!0});
b.prototype._onCreateElements=function(){this._createCollapsibleTitle();this._elems.childrenContainer=d.createSimpleElement("","formChildren","",null,null,this._elems.core);this._createStyles()};b.prototype._createClonedElement=function(a){return new b(this._id+a,this)};b.prototype._parseChildren=function(a){var b=this;a&&(e.isFormElement(a)?this._children=this._parseChild(a):(this._children={},d.map(a,function(a,c){a=b._parseChild(a);b._children[c]=a})))};b.prototype._parseChild=function(a){var b=
this,c=this._parseElement(a);this._applyColors(c);c.render(this._elems.childrenContainer);d.Events.addEventListener(e.FORM_ELEM_CHANGE,{func:function(a){a.context.key===c.id&&window.setTimeout(function(){b._updateInternalData(!0);b._dispatchChangeEvent()},0)},uniqueId:this._id+"|"+c.id});return c};b.prototype._updateInternalData=function(a){var b=this;e.isFormElement(this._children)?this._data=this._children.save(a):null!==this._data&&d.map(this._children,function(c,d){b._data[d]=c.save(a)})};b.prototype.save=
function(a){this._updateInternalData(a);return this._data};b.prototype._onClear=function(){e.isFormElement(this._children)?this._children.clear():d.map(this._children,function(a,b){a.clear()})};b.prototype.update=function(a){a&&(e.isFormElement(this._children)?this._children.update(a):d.map(this._children,function(b,c){b.update(a[c])}))};b.prototype._onChange=function(){return!0};b._uncoloredStyles={".kipFormElem.section":{marginTop:"10px",marginBottom:"5px"},".kipFormElem .sectionHeader":{fontFamily:"OpenSansBold,Segoe UI,Helvetica",
fontSize:"1.5em",color:"<0>",fontWeight:"bold"},".kipFormElem .section .sectionHeader, .kipFormElem .array .sectionHeader":{fontSize:"1.2em",color:"<1>"},".kipFormElem.section .formChildren":{marginLeft:"25px"}};return b}(g);e.SectionElement=c;var a=function(a){function c(b,c,d){b=a.call(this,b,c)||this;e.isFormElement(c)?b._childTemplate=c.childTemplate:b._childTemplate=d;b._children=[];return b}__extends(c,a);Object.defineProperty(c.prototype,"_type",{get:function(){return e.FormElementTypeEnum.ARRAY},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"_defaultValue",{get:function(){return[]},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"_defaultCls",{get:function(){return"array"},enumerable:!0,configurable:!0});c.prototype._getUncoloredStyles=function(){return this._mergeThemes(c._uncoloredStyles,g._uncoloredStyles,e.FormElement._uncoloredStyles)};Object.defineProperty(c.prototype,"childTemplate",{get:function(){return this._childTemplate},enumerable:!0,configurable:!0});
c.prototype.setThemeColor=function(b,c){a.prototype.setThemeColor.call(this,b,c);this._children&&0!==this._children.length||(e.isFormElement(this._childTemplate)?this._childTemplate.setThemeColor(b,c):d.map(this._childTemplate,function(a){a.setThemeColor(b,c)}));d.map(this._children,function(a){a.setThemeColor(b,c)})};c.prototype._parseElemTemplate=function(b){a.prototype._parseElemTemplate.call(this,b);this._newLabel=b.newLabel||"+ Add New Element"};c.prototype._onCreateElements=function(){var a=
this;this._createCollapsibleTitle();this._elems.childrenContainer=d.createSimpleElement("","formChildren","",null,null,this._elems.core);this._elems.newButton=d.createSimpleElement("","kipBtn new",this._newLabel,null,null,this._elems.core);this._elems.newButton.addEventListener("click",function(){a._createNewChild()});this._createStyles()};c.prototype._createClonedElement=function(a){return new c(this._id+a,this)};c.prototype._onChange=function(){return!0};c.prototype.update=function(a){var b=this;
a&&(this._onClear(),a.map(function(a){b._createNewChild().update(a)}))};c.prototype._createNewChild=function(){var a=this,c=new b(this._id+"|"+this._children.length.toString(),this._childTemplate);this._applyColors(c);this._children.push(c);c.render(this._elems.childrenContainer);d.Events.addEventListener(e.FORM_ELEM_CHANGE,{func:function(b){b.context.key===c.id&&window.setTimeout(function(){a._updateInternalData(!0);a._dispatchChangeEvent()},0)},uniqueId:this.id+"|"+c.id});return c};c.prototype._updateInternalData=
function(a){this._data=[];var b=0;for(b;b<this._children.length;b+=1){var c=this._children[b];d.isNullOrUndefined(c)||(c=c.save(a),d.isNullOrUndefined(c)||this._data.push(c))}};c.prototype.save=function(a){this._updateInternalData(a);return this._data};c.prototype._onClear=function(){var a=this;this._elems.childrenContainer.innerHTML="";this._children.map(function(b,c){a._children[c]=null})};c._uncoloredStyles={".kipBtn.new":{marginTop:"10px",marginBottom:"10px",marginLeft:"25px",backgroundColor:"<0>",
color:"#FFF",width:"calc(33% - 15px)"},".kipFormElem.array .arrayChild .arrayChild .kipBtn.new":{width:"100%",display:"block"},".kipForm .kipBtn.new:hover":{transform:"scale(1.01)"},".kipFormElem.array .formChildren":{display:"flex",flexWrap:"wrap",alignItems:"top"},".kipFormElem.array .formChildren .arrayChild":{maxWidth:"calc(33% - 20px)"},".kipFormElem.array .formChildren .arrayChild .arrayChild":{maxWidth:"100%"},".kipFormElem.array.collapsed .kipBtn.new":{display:"none"}};return c}(g);e.ArrayElement=
a;var b=function(a){function b(b,c){return a.call(this,b.toString(),{},c)||this}__extends(b,a);Object.defineProperty(b.prototype,"_type",{get:function(){return e.FormElementTypeEnum.ARRAY_CHILD},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultValue",{get:function(){return{}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultCls",{get:function(){return"arrayChild"},enumerable:!0,configurable:!0});b.prototype._getUncoloredStyles=function(){return this._mergeThemes(b._uncoloredStyles,
g._uncoloredStyles,e.FormElement._uncoloredStyles)};b.prototype._onCreateElements=function(){var a=this;this._elems.closeBtn=d.createSimpleElement("","close kipBtn","X",null,null,this._elems.core);this._elems.closeBtn.addEventListener("click",function(){a._delete()});this._elems.childrenContainer=d.createSimpleElement("","formChildren","",null,null,this._elems.core)};b.prototype._createClonedElement=function(a){return new b(this._id+a,this._children)};b.prototype._parseElement=function(b){return a.prototype._parseElement.call(this,
b,"|"+this._id)};b.prototype._delete=function(){this._elems.core.parentNode.removeChild(this._elems.core);this._data=null;this._dispatchChangeEvent()};b._uncoloredStyles={".kipFormElem.arrayChild .formChildren":{margin:"10px",marginTop:"0"},".kipFormElem.arrayChild":{backgroundColor:"#FFF",borderRadius:"5px",boxShadow:"1px 1px 5px 2px rgba(0,0,0,.2)",marginRight:"20px",marginBottom:"10px"}};return b}(c);e.ArrayChildElement=b})(d.Forms||(d.Forms={}))})(KIP||(KIP={}));
(function(d){(function(e){var g=function(a){function b(b,c){return a.call(this,b,c)||this}__extends(b,a);Object.defineProperty(b.prototype,"_type",{get:function(){return e.FormElementTypeEnum.TOGGLE_BUTTON},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultCls",{get:function(){return"toggleBtns"},enumerable:!0,configurable:!0});b.prototype._parseElemTemplate=function(b){a.prototype._parseElemTemplate.call(this,b);this._options=b.options};b.prototype._cloneFromFormElement=
function(b){a.prototype._cloneFromFormElement.call(this,b);this._options=b._options};b.prototype._onCreateElements=function(){this._createStandardLabel(this._elems.core);this._elems.childrenContainer=d.createSimpleElement("","formChildren","",null,null,this._elems.core);this._createOptionsElements()};b.prototype._createOptionsElements=function(){var a=this;d.map(this._options,function(b){a._createOptionElement(b)})};b.prototype._createOptionElement=function(a){var b=this,c=d.createElement({id:this._id+
"btn"+a.value,cls:"toggleBtn",content:a.label,parent:this._elems.childrenContainer});this._shouldBeSelected(a)&&this._selectBtn(c,a.value);c.addEventListener("click",function(){b._selectBtn(c,a.value);b._changeEventFired()});this._buttons||(this._buttons=[]);this._buttons.push({key:a.value,btn:c})};b.prototype._onChange=function(){return this._standardValidation(this._data)};b.prototype.update=function(a){this._data=a;var b=d.indexOf(this._buttons,{key:a,btn:null},function(a,b){return a.key===b.key});
-1!==b&&this._selectBtn(this._buttons[b].btn,a)};b.prototype._onClear=function(){};b._uncoloredStyles={".toggleBtns":{width:"800px"},".toggleBtns .formChildren":{display:"flex",flexWrap:"wrap"},".toggleBtn":{borderRadius:"2px",boxShadow:"1px 1px 4px 2px rgba(0,0,0,.1)",padding:"4px",margin:"4px",cursor:"pointer",textAlign:"center",fontSize:"0.8em",border:"1px solid transparent",opacity:"0.7"},".toggleBtn.selected, .toggleBtn:hover":{border:"1px solid <0>",transform:"scale(1.08)"},".toggleBtn.selected":{opacity:"1"}};
return b}(e.FormElement);e.ToggleButtonElement=g;var c=function(a){function b(b,c){return a.call(this,b,c)||this}__extends(b,a);Object.defineProperty(b.prototype,"_defaultValue",{get:function(){return null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_multiSelect",{get:function(){return!1},enumerable:!0,configurable:!0});b.prototype._parseElemTemplate=function(b){a.prototype._parseElemTemplate.call(this,b)};b.prototype._selectBtn=function(a,b){a&&(this._selectedBtn&&d.removeClass(this._selectedBtn,
"selected"),this._selectedBtn===a?(this._data=this._defaultValue,this._selectBtn=null):(this._data=b,this._selectedBtn=a,d.addClass(a,"selected")))};b.prototype._createClonedElement=function(a){return new b(this._id+a,this)};b.prototype._shouldBeSelected=function(a){return this._data===a.value};b.prototype._onClear=function(){this._selectedBtn&&(d.removeClass(this._selectedBtn,"selected"),this._selectBtn=null);this._data=this._defaultValue};b.prototype.setThemeColor=function(b,c,d){debugger;a.prototype.setThemeColor.call(this,
b,c,d)};return b}(g);e.SingleSelectButtonElem=c;g=function(a){function b(b,c){return a.call(this,b,c)||this}__extends(b,a);Object.defineProperty(b.prototype,"_multiSelect",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultValue",{get:function(){return[]},enumerable:!0,configurable:!0});b.prototype._parseElemTemplate=function(b){a.prototype._parseElemTemplate.call(this,b);this._selectedBtns=[]};b.prototype.update=function(a){var b=this;d.isNullOrUndefined(a)||
(this._onClear(),a.map(function(a){var c=document.getElementById(b._id+"btn"+a);b._selectBtn(c,a)}))};b.prototype._shouldBeSelected=function(a){return-1!==this._indexOf(a.value)};b.prototype._createClonedElement=function(a){return new b(this.id+a,this)};b.prototype._selectBtn=function(a,b){if(a){var c=this._selectedBtns.indexOf(a),f=this._indexOf(b);if(-1===f||-1!==c)-1!=c?(-1!==c&&(d.removeClass(a,"selected"),this._selectedBtns.splice(c,1)),-1!==f&&this._data.splice(f,1)):(this._data.push(b),this._selectedBtns.push(a),
d.addClass(a,"selected"))}};b.prototype._indexOf=function(a){for(var b=-1,c=0;c<this._data.length;c+=1)if(this._equalTo(this._data[c],a)){b=c;break}return b};b.prototype._equalTo=function(a,b){switch(typeof a){case "string":case "number":case "boolean":return a===b}return a instanceof Date?d.Dates.shortDate(a)===d.Dates.shortDate(b):a===b};b.prototype._onClear=function(){this._data=[];for(var a=this._selectedBtns.length-1;0<=a;--a)d.removeClass(this._selectedBtns[a],"selected"),this._selectedBtns.splice(a,
1)};return b}(g);e.MultiSelectButtonElem=g})(d.Forms||(d.Forms={}))})(KIP||(KIP={}));
(function(d){(function(e){var g=function(c){function a(a,d){return c.call(this,a,d)||this}__extends(a,c);Object.defineProperty(a.prototype,"_type",{get:function(){return e.FormElementTypeEnum.FILE_UPLOAD},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultCls",{get:function(){return"file"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultValue",{get:function(){return null},enumerable:!0,configurable:!0});a.prototype._parseElemTemplate=function(a){c.prototype._parseElemTemplate.call(this,
a);this._attr=a.attr};a.prototype._onCreateElements=function(){this._createStandardLabel(this._elems.core);this._elems.input=e.createInputElement("","","file",this._data,null,null,this._elems.core)};a.prototype._onChange=function(){return this._standardValidation(this._elems.input.files)};a.prototype._createClonedElement=function(b){return new a(this.id+b,this)};return a}(e.FormElement);e.FileUploadElement=g;g=function(c){function a(a,d){return c.call(this,a,d)||this}__extends(a,c);Object.defineProperty(a.prototype,
"_type",{get:function(){return e.FormElementTypeEnum.FILE_PATH},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultCls",{get:function(){return"filepath"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultValue",{get:function(){return""},enumerable:!0,configurable:!0});a.prototype._parseElemTemplate=function(a){c.prototype._parseElemTemplate.call(this,a);this._onSaveCallback=a.onSave;this._onChangeCallback=a.onChange;this._attr=a.attr};a.prototype._onCreateElements=
function(){this._createStandardLabel(this._elems.core);this._elems.display=d.createSimpleElement("","display",this._data,null,null,this._elems.core);this._elems.inputContainer=d.createSimpleElement("","fileContainer","",null,null,this._elems.core);this._elems.input=e.createInputElement(this._id+"|input","","file","",null,null,this._elems.inputContainer);this._elems.inputLabel=e.createLabelForInput("Upload File",this._id+"|input","filepath",this._elems.inputContainer)};a.prototype._onChange=function(){if(this._tempLink)return this._onLinkChange();
if(!this._onChangeCallback)return!1;this._files=this._elems.input.files;console.log(this._files);if(!this._files)return!0;var a=this._onChangeCallback(this._files);if(this._standardValidation(a))return!0};a.prototype._onLinkChange=function(){var a=this._standardValidation(this._tempLink);this._tempLink="";return a};a.prototype.update=function(a){this._data=a;this._elems.display.innerHTML=a;this._elems.input.value=""};a.prototype.save=function(a){if(!a){if(this._files){if(!this._onSaveCallback)return"";
this._onSaveCallback(this._files)}return this._data}};a.prototype._createClonedElement=function(b){return new a(this.id+b,this)};a._uncoloredStyles={".kipFormElem.filepath input[type=file]":{display:"none"},".kipFormElem.filepath label.filepath":{backgroundColor:"<0>",color:"#FFF",borderRadius:"2px",boxShadow:"1px 1px 5px 2px rgba(0,0,0,.1)",padding:"10px",fontSize:"0.7em",cursor:"pointer"},".kipFormElem.filepath .display":{fontSize:"0.6em",whiteSpace:"break"}};return a}(e.FormElement);e.FilePathElement=
g;g=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}__extends(a,c);Object.defineProperty(a.prototype,"_defaultCls",{get:function(){return"photopath"},enumerable:!0,configurable:!0});a.prototype._onCreateElements=function(){var a=this;this._elems.photoWrapper=d.createSimpleElement("","photoWrapper","",null,null,this._elems.core);this._elems.display=d.createElement({type:"img",cls:"photo",attr:{src:this._data},parent:this._elems.photoWrapper});this._elems.overlay=d.createSimpleElement("",
"photoOverlay","",null,null,this._elems.photoWrapper);this._elems.linkBtn=d.createSimpleElement("","photoBtn link","CHANGE LINK",null,null,this._elems.overlay);this._elems.linkBtn.addEventListener("click",function(){var b=window.prompt("What should the link be set to?",a._data);a._tempLink=b;a._changeEventFired()});this._elems.input=e.createInputElement(this._id+"|input","photoInput","file","",null,null,this._elems.overlay);this._elems.uploadBtn=e.createLabelForInput("UPLOAD",this._id+"|input","photoBtn upload",
this._elems.overlay);this._elems.input.addEventListener("change",function(){a._changeEventFired();a._onFileSelected()})};a.prototype._createClonedElement=function(b){return new a(this.id+b,this)};a.prototype.update=function(a){if(this._data=a)this._elems.display.src=a};a.prototype._onFileSelected=function(){var a=this,c;if(this._files&&(c=this._files[0])){var d=new FileReader;d.addEventListener("load",function(){window.setTimeout(function(){a._elems.display.src=d.result},0)});d.readAsDataURL(c)}};
a.prototype._onLinkChange=function(){var a=this._tempLink,d=c.prototype._onLinkChange.call(this);this._elems.display.src=a;return d};a.prototype._onClear=function(){this._data="";this._elems.display.src=""};a._uncoloredStyles={".kipFormElem.photopath .photoOverlay":{backgroundColor:"rgba(0,0,0,.5)",opacity:"0",transition:".1s opacity ease-in-out",position:"absolute",display:"flex",flexDirection:"column",cursor:"pointer",width:"100%",height:"100%",left:"0",top:"0",justifyContent:"center",alignItems:"center"},
".kipFormElem.photopath .photoWrapper:hover .photoOverlay":{opacity:"1"},".kipFormElem.photopath .photoWrapper":{width:"100px",height:"100px",borderRadius:"50px",border:"1px solid <0>",overflow:"hidden",position:"relative"},".kipFormElem.photopath .photoWrapper img":{width:"100%"},".kipFormElem.photopath .photoWrapper .photoBtn":{width:"100%",backgroundColor:"<0>",color:"#FFF",textAlign:"center",fontSize:"0.7em",cursor:"pointer",marginTop:"6px",opacity:"0.8"},".kipFormElem.photopath .photoWrapper .photoBtn:hover":{opacity:"1"},
".kipFormElem.photopath .photoWrapper input[type='file']":{display:"none"}};return a}(g);e.PhotoPathElement=g})(d.Forms||(d.Forms={}))})(KIP||(KIP={}));
(function(d){(function(e){var g=function(c){function a(a,f,e){var b=c.call(this)||this;b._addClassName("Form");b._id=a;b._showAsPopup=f.popupForm;b._noStandardStyles=f.noStandardStyles;b._hidden=!0;b._additionalButtons=f.addlButtons||[];b._hasChanges=!1;b._colors=f.colors||["#4A5","#284"];b._applyColors();b._saveListeners=new d.Collection;b._cancelListeners=new d.Collection;b._createElements();b._createCoreElem(f,e);b._addWindowEventListeners();return b}__extends(a,c);Object.defineProperty(a.prototype,
"data",{get:function(){return this._coreFormElem.save()},enumerable:!0,configurable:!0});a.prototype._createElements=function(){this._elems={base:d.createSimpleElement(this._id,"kipForm hidden"),background:d.createSimpleElement("","background"),formContent:d.createSimpleElement("","formContent")};this._createPopupElements();this._elems.background.appendChild(this._elems.formContent);this._createButtons();this._noStandardStyles||this._createStyles()};a.prototype._createPopupElements=function(){this._showAsPopup?
(d.addClass(this._elems.base,"popup"),this._elems.overlay=d.createSimpleElement("","overlay","",null,null,this._elems.base),this._elems.overlay.appendChild(this._elems.background),this._elems.closeButton=d.createSimpleElement("","close kipBtn","",null,null,this._elems.background)):this._elems.base.appendChild(this._elems.background)};a.prototype._createButtons=function(){var a=this;this._elems.buttons=d.createSimpleElement("","kipBtns","",null,null,this._elems.background);this._elems.saveButton=d.createSimpleElement("",
"kipBtn save","Save",null,null,this._elems.buttons);this._elems.saveButton.addEventListener("click",function(){a.save();a.hide()});this._elems.cancelButton=d.createSimpleElement("","kipBtn cancel","Cancel",null,null,this._elems.buttons);this._elems.cancelButton.addEventListener("click",function(){window.setTimeout(function(){a._cancelConfirmation()},10)});if(this._additionalButtons){var c=0,e=function(){var a=g._additionalButtons[c];d.createSimpleElement("","kipBtn "+a.cls,a.display,null,null,g._elems.buttons).addEventListener("click",
function(){a.callback()})},g=this;for(c;c<this._additionalButtons.length;c+=1)e()}};a.prototype._createCoreElem=function(a,c){var b=this;this._coreFormElem=new e.SectionElement(this._id,{type:e.FormElementTypeEnum.SECTION,label:a.label,cls:a.cls,layout:a.layout},c);this._applyColors(this._coreFormElem);this._coreFormElem.expand();d.Events.addEventListener(e.FORM_ELEM_CHANGE,{func:function(a){a.context.key===b._id&&(b._hasChanges=!0)},uniqueId:this._id+"|form"});this._coreFormElem.render(this._elems.formContent)};
a.prototype.save=function(){var a=this._coreFormElem.save();this._notifySaveListeners(a);this._hasChanges=!1;return a};a.prototype._notifySaveListeners=function(a){this._saveListeners.map(function(b){b&&b(a)})};a.prototype._cancelConfirmation=function(){var a=this;if(this._hasChanges){var c=new d.YesNoPopup("You have unsaved changes. Are you sure you want to cancel?",function(b){b===d.YesNoEnum.YES&&a._cancel()});c.setThemeColor(0,this._colors[0]);c.draw(document.body)}else this._cancel()};a.prototype._cancel=
function(){this.clear();this._notifyCancelListeners(this._hasChanges);this._hasChanges=!1;this.hide()};a.prototype.tryCancel=function(a){if(!this._hasChanges||a)return this._cancel(),!0;this._cancelConfirmation();return!1};a.prototype._notifyCancelListeners=function(a){this._cancelListeners.map(function(b){b&&b(a)})};a.prototype.clear=function(){this._coreFormElem.clear()};a.prototype.update=function(a){this._coreFormElem.update(a);this._hasChanges=!1};a.prototype.undo=function(){};a.prototype.redo=
function(){};a.prototype._trackChanges=function(){};a.prototype.show=function(){this._hidden&&d.removeClass(this._elems.base,"hidden")};a.prototype.hide=function(){this._hidden||d.addClass(this._elems.base,"hidden")};a.prototype.draw=function(a,d){c.prototype.draw.call(this,a);this._elems.base.parentNode||document.body.appendChild(this._elems.base);d||this.show()};a.prototype.registerSaveListener=function(a){var b=this._saveListeners.length.toString();this._saveListeners.addElement(b,a);return b};
a.prototype.registerCancelListener=function(a){var b=this._cancelListeners.length.toString();this._cancelListeners.addElement(b,a);return b};a.prototype._addWindowEventListeners=function(){var a=this;window.addEventListener("beforeunload",function(b){if(a._hasChanges)return b.returnValue="You have unsaved changes; are you sure you want to leave this page?"})};a._uncoloredStyles={".kipForm":{borderRadius:"2px",backgroundColor:"#FFF",width:"60%",marginLeft:"20%",padding:"5px",fontFamily:"OpenSansLight,Segoe UI,Helvetica",
fontSize:"1.2em",position:"inherit",boxSizing:"border-box"},".kipForm.hidden":{display:"none"},".kipForm overlay":{position:"absolute",width:"100%",height:"100%",top:"0",left:"0",backgroundColor:"rgba(0,0,0,.6)"},".kipForm .formContent":{marginRight:"10px"},".kipForm .kipBtns":{display:"flex",justifyContent:"flex-end"},".kipForm .kipBtn":{padding:"5px 20px",marginRight:"10px",cursor:"pointer",borderRadius:"2px",boxShadow:"1px 1px 5px 2px rgba(0,0,0,.1)",fontSize:"1.2em",boxSizing:"border-box",textAlign:"center",
transition:"all ease-in-out .1s"},".kipForm .kipBtn:hover, .kipForm .kipBtn.selected":{transform:"scale(1.05)"},".kipForm .save.kipBtn":{backgroundColor:"<0>",color:"#FFF",width:"20%"},".kipForm .close.kipBtn":{borderRadius:"10px",border:"2px solid #999",width:"15px",height:"15px",backgroundColor:"#999",color:"#FFF",padding:"0",fontSize:"0.6em",position:"absolute",top:"-7px",left:"calc(100% - 7px)",boxSizing:"content-box",textAlign:"center"},".kipForm .cancel.kipBtn":{backgroundColor:"#999",color:"#FFF"}};
return a}(d.Drawable);e.Form=g;e.FORM_ELEM_CHANGE="formelemchange";d.Events.createEvent({name:"Form Element Changed",key:e.FORM_ELEM_CHANGE})})(d.Forms||(d.Forms={}))})(KIP||(KIP={}));
(function(d){var e=function(e){function c(){return e.call(this)||this}__extends(c,e);c.prototype._createElements=function(){this._elems.base=d.createElement({cls:"kipShield"});this._elems.shieldContent=d.createElement({cls:"shieldContent",parent:this._elems.base});this._createShieldDetails()};c.prototype.draw=function(a){a||(a=document.body);e.prototype.draw.call(this,a)};c._uncoloredStyles={".kipShield":{position:"fixed",backgroundColor:"rgba(0,0,0,0.6)",width:"100%",height:"100%",left:"0",top:"0",
zIndex:"100"},".kipShield .shieldContent":{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}};return c}(d.Drawable);d.Shield=e})(KIP||(KIP={}));
(function(d){var e=function(e){function c(a){var b=e.call(this)||this;b._loadingText=a||"Loading...";b._createElements();return b}__extends(c,e);c.prototype._getUncoloredStyles=function(){return this._mergeThemes(c._uncoloredStyles,d.Shield._uncoloredStyles)};c.prototype._shouldSkipCreateElements=function(){return!0};c.prototype._createShieldDetails=function(){this._elems.wrapper=d.createElement({cls:"loadingContainer",parent:this._elems.shieldContent});this._elems.text=d.createElement({cls:"loadingText",
content:this._loadingText,parent:this._elems.wrapper});this._elems.icon=d.createElement({cls:"loadingIcon",parent:this._elems.wrapper})};c._uncoloredStyles={".kipShield loadingContainer":{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},".kipShield .loadingText":{fontFamily:'"OpenSansLight", "Helvetica"',fontSize:"1.4em",color:"#FFF"},".kipShield .loadingIcon":{border:"1px solid transparent",borderTop:"1px solid #FFF",borderRadius:"25px",width:"25px",height:"25px",
animation:"rotate infinite linear 1s",margin:"auto"}};return c}(d.Shield);d.LoadingShield=e})(KIP||(KIP={}));
(function(d){var e=function(){function d(c){this._content=c}Object.defineProperty(d.prototype,"content",{get:function(){return this._content},set:function(c){this._content=c},enumerable:!0,configurable:!0});d.prototype.addChildElement=function(c){this._childElements.push(c);c.draw()};d.prototype.addLinkedElement=function(c){};d.prototype.draw=function(){};d.prototype.erase=function(){};return d}();d.WebElement=e})(KIP||(KIP={}));
(function(d){var e=function(){function e(c,a){this._parent=c||document.body;this._canvas=new d.HTML5Canvas("web",a);this._parent&&this._canvas.draw(this._parent)}e.prototype.addWebElement=function(c){this._elements.push(c);this.draw()};e.prototype.draw=function(c){this._parent||(this._parent=c)};e.prototype.erase=function(){};e.prototype.createWebElementFromContent=function(c){return null};return e}();d.Web=e})(KIP||(KIP={}));
